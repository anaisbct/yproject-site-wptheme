jQuery(document).ready(function(e){YPUIFunctions.initUI(),WDGFormsFunctions.init()}),JSHelpers=(jQuery,{urldecode:function(e){return decodeURIComponent((e+"").replace(/\+/g,"%20"))},formatTextToNumber:function(e){var t=Number(e.split(",").join(".").split(" ").join(""));return isNaN(t)&&(t=0),t},formatNumber:function(e,t){e===parseInt(e,10)&&(e=parseFloat(e).toFixed(2));var n=e.toString(),i=(n=(n=n.replace(/\d(?=(\d{3})+\.)/g,"$& ")).split(".").join(",")).split(",");"00"===i[1]&&(n=i[0]);var o=n;return""!==t&&(o+=" "+t),o}}),YPUIFunctions=function(s){return{currentLightbox:"",currentRequest:"",initUI:function(){WDGLightboxFunctions.init(),WDGNavFunctions.init(),s(document).scroll(function(){""===YPUIFunctions.currentLightbox&&(50<s(document).scrollTop()?(s("nav#main").css("marginTop",0),250<s(document).scrollTop()?s(".responsive-fixed").addClass("fixed"):s(".responsive-fixed").removeClass("fixed")):s("nav#main").css("marginTop",10))}),s(".expandator").css("cursor","pointer"),s(".expandable").not(".default-expanded").hide(),s(".expandator").click(function(){var e=s(this).data("target");s("#extendable-"+e).is(":visible")?s("#extendable-"+e).hide():s("#extendable-"+e).show()}),s("footer span.footer-subtitle.clickable").click(function(){s(window).width()<998&&(s(this).next().is(":visible")?(s(this).removeClass("expanded"),s(this).next().hide()):(s(this).addClass("expanded"),s(this).next().show()))}),s(".impacts-container .impact-logo").mouseover(function(){var e=YPUIFunctions.findPos(this).x;s(this).next().addClass("visible").removeClass("invisible"),s(this).next().css("left",e)}),s(".impacts-container .impact-logo").mouseout(function(){s(this).next().addClass("invisible").removeClass("visible")}),s(".home_video .button-video, .home_video .button-video-shadows").click(function(){s(".home_video .button-video, .home_video .button-video-shadows").hide();var e=".home_video .video-container",t="320",n="180";570<s(window).width()?(e+=".w570",t="570",n="321"):e+=".w320",s(e).append('<iframe src="https://www.youtube.com/embed/QJmhrCG5acU?feature=oembed&amp;rel=0&amp;wmode=transparent&amp;autoplay=1" style="border: none" allow="autoplay; encrypted-media" width="'+t+'" height="'+n+'"></iframe>'),s(e).show()}),0<s("#cookies-alert").length&&("1"===YPUIFunctions.getCookie("hidecookiealert")&&s("#cookies-alert").hide(),s("#cookies-alert-close").click(function(){s("#cookies-alert").hide();var e=new Date;e.setTime(e.getTime()+864e7);var t="; expires="+e.toGMTString();document.cookie="hidecookiealert=1"+t+"; path=/"}));s("#fundingproject").val()&&(s("#goalsum_fixe").click(function(){s("#goalsum_flexible_param").hide(),s("#goalsum_fixe_param").show()}),s("#goalsum_flexible").click(function(){s("#goalsum_flexible_param").show(),s("#goalsum_fixe_param").hide()}),s("#goal_search").change(function(){s("#goal").val(Math.round(s("#goal_search").val()*s("#campaign_multiplier").val())),s("#goalsum_campaign_multi").text(s("#goal").val()+s("#monney").val())}),s("#minimum_goal_search").change(function(){s("#minimum_goal").val(Math.round(s("#minimum_goal_search").val()*s("#campaign_multiplier").val())),s("#goalsum_min_campaign_multi").text(s("#minimum_goal").val()+s("#monney").val())}),s("#maximum_goal_search").change(function(){s("#maximum_goal").val(Math.round(s("#maximum_goal_search").val()*s("#campaign_multiplier").val())),s("#goalsum_max_campaign_multi").text(s("#maximum_goal").val()+s("#monney").val())}),s(".radiofundingtype").change(function(){s("#fundingdevelopment_param").show(),"fundingproject"==s("input[name=fundingtype]:checked").val()&&s(".min_amount_value").text(s("#min_amount_project").val()),"fundingdevelopment"==s("input[name=fundingtype]:checked").val()&&s(".min_amount_value").text(s("#min_amount_development").val()),"fundingdonation"==s("input[name=fundingtype]:checked").val()&&(s("#fundingdevelopment_param").hide(),s(".min_amount_value").text(s("#min_amount_donation").val()))})),0<s("#company_status").length&&s("#company_status").change(function(){"Autre"==s("#company_status").val()?s("#company_status_other_zone").show():s("#company_status_other_zone").hide()}),s(".wp-editor-wrap")[0]&&setInterval(YPUIFunctions.onRemoveUploadInterval,1e3),s(".alert-confirm").click(function(e){e.preventDefault(),confirm(s(this).data("alertconfirm"))&&(window.location.href=s(this).attr("href"))}),0<s(".ajax-investments-load").length&&(campaign_id=s(".ajax-investments-load").attr("data-value"),YPUIFunctions.getInvestments(campaign_id,!1)),0<s(".ajax-investments-load-short").length&&(campaign_id=s(".ajax-investments-load-short").attr("data-value"),YPUIFunctions.getInvestments(campaign_id,!0)),0<s("body.home.page").length&&0<s(".wdg-component-projects-preview .project-slider").length&&(s(".wdg-component-projects-preview .block-projects").width((s(".wdg-component-projects-preview .project-container").width()+5)*s(".wdg-component-projects-preview .project-container").length),s(".wdg-component-projects-preview .project-slider").scrollLeft((s(".wdg-component-projects-preview .block-projects").width()-s(".wdg-component-projects-preview .project-slider").width())/2)),s(".projects-current .wdg-component-projects-preview .project-slider .block-projects").width()>s(".projects-current .wdg-component-projects-preview .project-slider").width()&&0<s(".projects-current .wdg-component-projects-preview .project-slider").length&&(s(".projects-current .wdg-component-projects-preview .block-projects").width((s(".projects-current .wdg-component-projects-preview .project-container").width()+5)*s(".projects-current .wdg-component-projects-preview .project-container").length),s(".projects-current .wdg-component-projects-preview .project-slider").scrollLeft((s(".projects-current .wdg-component-projects-preview .block-projects").width()-s(".projects-current .wdg-component-projects-preview .project-slider").width())/2),s(".projects-funded .wdg-component-projects-preview .block-projects").width(s(".projects-funded .wdg-component-projects-preview .project-container").width()*s(".projects-funded .wdg-component-projects-preview .project-container.cat-entreprises").length)),s(".projects-after-end-date .wdg-component-projects-preview .project-slider .block-projects").width()>s(".projects-after-end-date .wdg-component-projects-preview .project-slider").width()&&0<s(".projects-after-end-date .wdg-component-projects-preview .project-slider").length&&(s(".projects-after-end-date .wdg-component-projects-preview .block-projects").width((s(".projects-after-end-date .wdg-component-projects-preview .project-container").width()+5)*s(".projects-after-end-date .wdg-component-projects-preview .project-container").length),s(".projects-after-end-date .wdg-component-projects-preview .project-slider").scrollLeft((s(".projects-after-end-date .wdg-component-projects-preview .block-projects").width()-s(".projects-after-end-date .wdg-component-projects-preview .project-slider").width())/2)),0<s("#project-filter").length&&(s("#project-filter > span").click(function(){s("#project-filter span").hasClass("show")?s("#project-filter span").removeClass("show"):s("#project-filter span").addClass("show"),s("#project-filter select").toggle()}),s("#project-filter .project-filter-select").click(function(){var e=s("#project-filter-step").val(),t=s("#project-filter-location").val(),n=s("#project-filter-impact").val();YPUIFunctions.refreshProjectList(e,t,n)}),s("#project-filter .project-filter-select").trigger("click"),s("div.padder.projects-funded button").click(function(){var e=s("div.padder.projects-funded .block-projects").height()+620;s("div.padder.projects-funded .block-projects").css("max-height",e),620*Math.ceil(s("div.padder.projects-funded .block-projects .project-container").length/4)<=e&&s("div.padder.projects-funded button").hide()})),s(".avoid-enter-validation").on("keyup keypress",function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1})},findPos:function(e){var t=y=0;if(e.offsetParent)for(t=e.offsetLeft,y=e.offsetTop;e===e.offsetParent;)t+=e.offsetLeft,y+=e.offsetTop;return{x:t,y:y}},getInvestments:function(t,e){YPUIFunctions.currentRequest=s.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"get_investments_data",id_campaign:t,is_short_version:e?"1":"0"}}).done(function(e){YPUIFunctions.currentRequest="",inv_data=JSON.parse(e),s.each(inv_data,function(e,t){s(".data-inv-"+e).html(t)}),s(".ajax-data-inv-loader-img").slideUp(),0<s("#ajax-contacts-load").length&&wdgCampaignDashboard.getContactsTable(JSON.stringify(inv_data),t)}).fail(function(){})},onRemoveUploadInterval:function(){s(".media-frame-menu")[0]&&s(".media-frame-menu").remove(),s(".media-frame-router")[0]&&s(".media-frame-router").show()},refreshProjectPreview:function(){0<s(".home-large-project").length&&s(".home-large-project").each(function(){var e=s(this).find(".description-zone"),t=s(this).find(".description-summary"),n=s(this).find(".description-discover"),i=s(this).find(".video-zone"),o=s(this).find(".description-middle"),a=s(this).find(".video-zone>iframe");0<a.length?s(e).height(s(a).height()):s(e).height(s(i).height());var r=s(e).height()-s(t).height()-s(n).height();s(o).css("top",s(t).height()-s(o).height()/2+r/2)})},refreshProjectList:function(t,n,i){var o=n.split(",");s(".wdg-component-projects-preview .block-projects .project-container").show(),s(".wdg-component-projects-preview .block-projects .project-container").each(function(){var e=s(this).data("categories");"all"!==t&&s(this).data("step")!==t&&s(this).hide(),"all"!==n&&-1===o.indexOf(s(this).data("location").toString())&&s(this).hide(),"all"!==i&&-1===e.indexOf(i)&&s(this).hide()})},getCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return""}}}(jQuery);var WDGNavFunctions=function(l){return{isConnectionChecked:!1,init:function(){l("nav#main a.lines").click(function(e){l("nav#main a.lines").removeClass("current"),l(this).addClass("current"),l(this).addClass("select-nav")}),l(".btn-user").click(function(e){"#"==l(this).attr("href")&&(e.preventDefault(),l(".btn-user").hasClass("active")?(l(".btn-user").removeClass("active").addClass("inactive"),l("#submenu-user").hide()):(l(".btn-user").addClass("active").removeClass("inactive"),l("#submenu-user").show(),l("#btn-search, #btn-burger").removeClass("active").addClass("inactive"),l("#submenu-search").hide(),l(this).hasClass("not-connected")&&WDGNavFunctions.checkUserConnection()))}),0<l("#content").length&&void 0!==l("#content").data("campaignid")&&WDGNavFunctions.checkUserConnection(),l("#btn-search, #btn-burger").click(function(e){e.preventDefault(),l("#btn-search, #btn-burger").hasClass("active")?(l("#btn-search, #btn-burger").removeClass("active").addClass("inactive"),l("#submenu-search").hide()):(l("#btn-search, #btn-burger").addClass("active").removeClass("inactive"),l("#submenu-search").show(),l("#submenu-search-input").focus(),l(".btn-user").removeClass("active").addClass("inactive"),l("#submenu-user").hide(),0==l("#submenu-search ul.submenu-list li").length&&l.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"get_searchable_projects_list"}}).done(function(e){for(var t=JSON.parse(e),n=t.length,i=0;i<n;i++)l("#submenu-search ul.submenu-list").append('<li class="hidden"><a href="https://www.wedogood.co/'+t[i].post_name+'">'+t[i].post_title+'<span class="hidden">'+t[i].post_title+"</span></a></li>");l("#submenu-search-input").trigger("keyup")}))}),l("#submenu-search-input").keyup(function(){var e=l("#submenu-search-input").val().toLowerCase();if(l("#submenu-search .submenu-list li").addClass("hidden"),""!=e&&l("#submenu-search .submenu-list li").each(function(){-1<l(this).find("a").text().toLowerCase().indexOf(e)&&l(this).removeClass("hidden")}),l("#submenu-search").height("auto"),"get funky!"===e){l("#container").empty(),l("#container").append('<div class="align-center" style="padding-top: 80px;"><iframe width="560" height="315" src="https://www.youtube.com/embed/kxopViU98Xo?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe></div>'),WDGGETFUNKY_MARGINLEFT=500,function e(){WDGGETFUNKY_MARGINLEFT*=-1;l("#container div").animate({marginLeft:WDGGETFUNKY_MARGINLEFT},2e3,"swing",function(){e()})}()}}),l("#menu .btn-user").click(function(){""!==l(".model-form #identifiant").val()&&""!==l(".model-form #password").val()&&WDGNavFunctions.showOkConnect()}),l(".model-form #identifiant").bind("keypress click",function(){WDGNavFunctions.showOkConnect()}),l(".model-form #password").bind("keypress click",function(){WDGNavFunctions.showOkConnect()}),l(window).mouseup(function(e){var t=l("#submenu-user"),n=l("#menu .btn-user"),i=l("#menu .btn-user img"),o=l("#submenu-search"),a=l("#menu #btn-search"),r=l("#menu #btn-search img"),s=l("#btn-burger"),c=l("#btn-burger img");t.is(e.target)||n.is(e.target)||i.is(e.target)||"block"!==t.css("display")||0!==t.has(e.target).length?o.is(e.target)||a.is(e.target)||r.is(e.target)||c.is(e.target)||"block"!==o.css("display")||0!==o.has(e.target).length||(o.hide(),a.removeClass("active").addClass("inactive"),s.removeClass("active").addClass("inactive")):(t.hide(),n.removeClass("active").addClass("inactive"))}),l(".social_connect_login_facebook").click(function(e){e.preventDefault(),l(".social_connect_login_facebook_loading").show(),l.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"get_connect_to_facebook_url",redirect:l(".social_connect_login_facebook").data("redirect")}}).done(function(e){-1<e.indexOf("http")?window.location=e:alert("Facebook Connection URL Error")}).fail(function(){alert("Facebook Connection Error")}).always(function(){l(".social_connect_login_facebook_loading").hide()})})},showOkConnect:function(){l(".model-form .submit-center").css("display","inline"),l(".model-form input#password").addClass("pwd_submit"),l(".model-form input.connect").addClass("ok_valid")},checkUserConnection:function(){if(!WDGNavFunctions.isConnectionChecked){WDGNavFunctions.isConnectionChecked=!0;var e="";0<l("#content").length&&void 0!==l("#content").data("campaignstatus")&&"funded"===l("#content").data("campaignstatus")&&(e=l("#content").data("campaignid")),l.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"get_current_user_info",pageinfo:e}}).done(function(e){if("0"===e)l("#submenu-user.not-connected .menu-loading-init").hide(),l("#submenu-user.not-connected .menu-connection-forms").show();else{var t=JSON.parse(e);l("#menu .btn-user").addClass("connected").removeClass("not-connected"),"1"==t.userinfos.display_need_authentication&&l("#menu .btn-user").addClass("needs-authentication"),l("#menu .btn-user img").remove(),l("#menu .btn-user").append(t.userinfos.image_dom_element),l("#submenu-user.not-connected .menu-loading-init").hide(),l("#submenu-user.not-connected .menu-connected #submenu-user-hello .hello-user-name").html(t.userinfos.username);for(var n=t.projectlist.length,i=0;i<n;i++)itemProject=t.projectlist[i],l("#submenu-user.not-connected .menu-connected .submenu-list").append('<li><a href="'+itemProject.url+'" class="'+("1"===itemProject.display_need_authentication?"needs-authentication":"")+'">'+itemProject.name+"</a></li>");if("1"==t.userinfos.display_need_authentication&&l("#submenu-user.not-connected .menu-connected #button-logout a").addClass("needs-authentication"),l("#submenu-user.not-connected .menu-connected #button-logout a").attr("href",t.userinfos.logout_url),l("#submenu-user.not-connected .menu-connected").show(),null!=t.context&&null!=t.context.dashboard_url&&0==l("#content .project-admin").length){var o=t.scripts.length;for(i=0;i<o;i++)l("body").append('<script type="text/javascript" src="'+t.scripts[i]+'"><\/script>');l("#content").append('<div class="project-admin"></div>'),l("#content .project-admin").append('<a href="'+t.context.dashboard_url+'" class="btn-dashboard">Tableau de bord</a>'),l("#content .project-admin").append('<div id="wdg-edit-project" class="btn-edit"></div>'),ProjectEditor.isInit=!1,ProjectEditor.init()}}})}}}}(jQuery),WDGLightboxFunctions=function(i){return{init:function(){if(0<i(".wdg-lightbox").length){i(".wdg-lightbox").each(function(){"1"==i(this).data("autoopen")&&WDGLightboxFunctions.displaySingle(i(this).attr("id").split("wdg-lightbox-")[1])}),i(".wdg-button-lightbox-open").not("#wdg-lightbox-newproject .wdg-button-lightbox-open").click(function(){WDGLightboxFunctions.displaySingle(i(this).data("lightbox"))}),i(".wdg-lightbox .wdg-lightbox-button-close a").click(function(e){e.preventDefault(),WDGLightboxFunctions.hideAll()}),i(".wdg-lightbox #wdg-lightbox-welcome-close").click(function(e){WDGLightboxFunctions.hideAll()}),i(".wdg-lightbox .wdg-lightbox-click-catcher").click(function(e){i(this).hasClass("disable")||WDGLightboxFunctions.hideAll()});var e=window.location.hash.substring(1);-1===e.indexOf("=")&&0<i("#wdg-lightbox-"+e).length&&WDGLightboxFunctions.displaySingle(e)}if(0<i(".timeout-lightbox").length){var t=2e3;0<i(".timeout-lightbox").data("duration")&&(t=i(".timeout-lightbox").data("duration")),setTimeout(function(){i(".timeout-lightbox").fadeOut()},t),i(".timeout-lightbox .wdg-lightbox-padder").click(function(){i(this).parent().hide()})}if(0<i("#wdg-lightbox-connexion").length&&i(".wdg-button-lightbox-open").click(function(){i("#wdg-lightbox-connexion .redirect-page").attr("value",i(this).data("redirect"))}),0<i("#wdg-lightbox-register").length&&i(".wdg-button-lightbox-open").click(function(){i("#wdg-lightbox-register .redirect-page").attr("value",i(this).data("redirect"))}),0<i("#newproject_form").length){if(i("#wdg-lightbox-newproject #connect-form .wdg-button-lightbox-open").click(function(e){e.preventDefault(),i("#wdg-lightbox-newproject #connect-form").hide(),i("#wdg-lightbox-newproject #newproject-register-user").show();var t=i("#wdg-lightbox-newproject #newproject-register-user form").attr("action");t=t.split("#register").join("#newproject"),i("#wdg-lightbox-newproject #newproject-register-user form").attr("action",t)}),i("#wdg-lightbox-newproject #newproject-register-user .wdg-button-lightbox-open").click(function(e){e.preventDefault(),i("#wdg-lightbox-newproject #newproject-register-user").hide(),i("#wdg-lightbox-newproject #connect-form").show()}),i("#newproject_form input#new-company-name").val(" "),i("#newproject_form div#field-new-company-name").hide(),0<i("#newproject_form select[name=company-name]").length&&(i("#newproject_form input#email-organization").val(" "),i("#newproject_form div#field-email-organization").hide()),""===i("#newproject_form input#company-name").val()&&i("#newproject_form #project-name").val(""),i("#newproject_form #select-company-name").on("keyup change",function(){i("#newproject_form div#field-new-company-name").hide(),i("#newproject_form div#field-email-organization").hide();var e="";0<i("#newproject_form input#company-name").length&&""!==i("#newproject_form input#company-name").val()?(e=i("#newproject_form input#company-name").val(),i("#newproject_form #project-name").val("Projet de "+e),i("#newproject_form input#new-company-name").val(" "),i("#newproject_form input#email-organization").val(" ")):0<i("#newproject_form select[name=company-name]").length&&("new_orga"!==i("#newproject_form select[name=company-name] option:selected").val()?(e=i("#newproject_form select[name=company-name] option:selected").text(),i("#newproject_form #project-name").val("Projet de "+e),i("#newproject_form input#new-company-name").val(" "),i("#newproject_form input#email-organization").val(" ")):(i("#newproject_form input#new-company-name").val(""),i("#newproject_form #project-name").val(""),i("#newproject_form div#field-new-company-name").show(),i("#newproject_form input#new-company-name").on("keyup change",function(){var e=i("#newproject_form input#new-company-name").val();""!=e?i("#newproject_form #project-name").val("Projet de "+e):i("#newproject_form #project-name").val("")}),i("#newproject_form input#email-organization").val(""),i("#newproject_form input#new-company-name").val(""),i("#newproject_form div#field-email-organization").show()))}),i("#newproject_form input#new-company-name").focus(function(){i("#newproject_form input#new-company-name").val("")}),""!==i("#newproject_form #company-name").val()){var n=i("#newproject_form #company-name option:selected").text();i("#newproject_form #project-name").val("Projet de "+n)}i("input, textarea","#newproject_form").keyup(function(){i("#newProject_button").find("button").prop("disabled",0<i("input, textarea","#newproject_form").filter(function(){return""==i(this).val()}).length||!i("#project-terms").is(":checked"))}),i("input, textarea","#newproject_form").trigger("keyup"),i("#project-terms").change(function(){i("input, textarea","#newproject_form").trigger("keyup")}),i("#newproject_form").submit(function(){i("#newProject_button").find(".button-text").hide(),i("#newProject_button").find(".button-waiting").show(),i("#newProject_button button").prop("disabled",!0)})}},displaySingle:function(e){if(""==e)return FALSE;"function"==typeof ga&&(ga("set",{page:document.location.pathname+"#"+e,title:document.title+" | "+e}),ga("send","pageview")),i(".wdg-lightbox").hide(),i("#wdg-lightbox-"+e).show(),"1"==i("#wdg-lightbox-"+e).data("scrolltop")&&WDGLightboxFunctions.scrollTop(i(".wdg-lightbox-padder")),YPUIFunctions.currentLightbox=e},hideAll:function(){i(".wdg-lightbox").hide(),YPUIFunctions.currentLightbox=""},scrollTop:function(e){i(".wdg-lightbox-padder").scrollTop(e.offset().top-75)}}}(jQuery),WDGFormsFunctions=function($){return{init:function(){WDGFormsFunctions.initSaveButton(),WDGFormsFunctions.initCheckboxes(),WDGFormsFunctions.initRateCheckboxes(),WDGFormsFunctions.initDatePickers(),WDGFormsFunctions.initTextInput(),WDGFormsFunctions.initFileInput(),WDGFormsFunctions.initSelectMultiple()},initSaveButton:function(){$(".wdg-lightbox-ref .ajax-form button.save").click(function(e){e.preventDefault(),$(this).siblings(".loading").show(),$(this).siblings("button").hide(),$(this).hide();var t=$(this).parent().parent().parent().attr("id");WDGFormsFunctions.postForm("#"+t,WDGFormsFunctions.postFormCallback,this)}),$(".ajax-form button.save").click(function(e){e.preventDefault(),$(this).siblings(".loading").show(),$(this).siblings("button").hide(),$(this).hide();var t=$(this).parent().parent().attr("id");WDGFormsFunctions.postForm("#"+t,WDGFormsFunctions.postFormCallback,this)}),$(".db-form button.confirm").click(function(e){window.confirm("Etes-vous sûrs de vouloir enregistrer ces modifications ?")||(e.stopPropagation(),e.preventDefault())}),$(".wdg-lightbox button.close, .wdg-lightbox-ref button.close").click(function(e){WDGLightboxFunctions.hideAll()}),$(".wdg-lightbox button.redirect, .wdg-lightbox-ref button.redirect").click(function(e){window.location=$(this).data("redirecturl")})},initCheckboxes:function(){0<$(".db-form.v3 input[type=checkbox]").length&&$(".db-form.v3 input[type=checkbox]").each(function(){$(this).hasClass("rate")||$(this).parent().hasClass("selectit")||($(this).parent().children("a").click(function(e){e.stopImmediatePropagation()}),$(this).parent().click(function(e){"1"!=$(this).data("keepdefault")&&e.preventDefault();var t=$(this).children("input[type=checkbox]")[0];t.checked=!t.checked,$(this).parent().hasClass("select-multiple-items")&&WDGFormsFunctions.refreshSelectMultiple($(this).parent().parent())}))})},initRateCheckboxes:function(){0<$(".db-form.v3 input[type=checkbox].rate").length&&$(".db-form.v3 input[type=checkbox].rate + span").click(function(){var e=$(this).data("rate");$("input[type=checkbox]."+e).attr("checked",!1);var t=$(this).data("value");WDGFormsFunctions.setRateCheckboxes(e,t)})},initDatePickers:function(){0<$("input[type=text].adddatepicker").length&&$("input[type=text].adddatepicker").datepicker({dateFormat:"dd/mm/yy",yearRange:"-120:+10",regional:"fr",changeMonth:!0,changeYear:!0})},initTextInput:function(){$("input.format-number").each(function(){var e=$(this).val(),t=JSHelpers.formatNumber(JSHelpers.formatTextToNumber(e),"");$(this).val(t)}),$("input.format-number").change(function(){var e=$(this).val(),t=JSHelpers.formatNumber(JSHelpers.formatTextToNumber(e),"");$(this).val(t)})},initFileInput:function(){$(".field-file input").on("change",function(e){var t=$(this).next("label"),n=t.html(),i="";this.files&&1<this.files.length?i=(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value&&(i=e.target.value.split("\\").pop()),i?(t.find("span").html(i),t.find("span.hide-when-filled").hide()):t.html(n),t.show(),t.css("display","inline-block"),t.next(".displayed-responsive").hide(),WDGLightboxFunctions.hideAll()}),$("label.file-label").on("dragover",function(e){$(this).addClass("dragover"),e.stopPropagation(),e.preventDefault()}),$("label.file-label").on("dragleave",function(e){$(this).removeClass("dragover"),e.stopPropagation(),e.preventDefault()}),$("label.file-label").on("drop",function(e){e.stopPropagation(),e.preventDefault(),$(this).removeClass("dragover");var t=$(this).data("input");$("#"+t).prop("files",e.originalEvent.dataTransfer.files),$("#"+t).trigger("change")}),$("button.take-picture, button.import-file").click(function(e){e.stopPropagation(),e.preventDefault();var t=$(this).data("input-id");$(this).hasClass("take-picture")?($("#"+t).attr("accept","image/*"),$("#"+t).attr("capture","1")):($("#"+t).removeAttr("accept"),$("#"+t).removeAttr("capture")),$("#"+t).click()})},initSelectMultiple:function(){$(".select-multiple-items-retracted").click(function(){var e=$(this).siblings(".select-multiple-items");e.is(":visible")?$(this).removeClass("reverse"):$(this).addClass("reverse"),e.toggle(50)})},refreshSelectMultiple:function(e){for(var t=e.find("span.select-multiple-items-retracted-values")[0],n="",i=e.find("label.radio-label"),o=e.find("label.radio-label input"),a=i.length,r=0;r<a;r++)o[r].checked&&(""!==n&&(n+=", "),n+=$(i[r]).text());n=n.split("\n").join("").split("\t").join(""),$(t).text(n)},setRateCheckboxes:function(e,t){for(var n=1;n<=t;n++)$("input[type=checkbox]#"+e+"-"+n)[0].checked=!0;$("span#"+e+"-description").text($("input[type=checkbox]#"+e+"-"+t).data("description"))},postForm:function(a,r,s){$(a+" div.field").removeClass("error");var e={};if($(a).hasClass("has-files")?e=new FormData($(a)[0]):$(a+" input, "+a+" select, "+a+" textarea").each(function(){"checkbox"===$(this).attr("type")||"radio"===$(this).attr("type")?$(this).is(":checked")&&(e[$(this).attr("name")]=$(this).val()):e[$(this).attr("name")]=$(this).val()}),$(a).hasClass("has-files"))var t={type:"POST",url:ajax_object.ajax_url,data:e,cache:!1,contentType:!1,processData:!1};else t={type:"POST",url:ajax_object.ajax_url,data:e};$.ajax(t).done(function(e){var t=JSON.parse(e);if(null!=t.errors)for(var n=t.errors.length,i=0;i<n;i++){var o=t.errors[i];"general"==o.element?$(a+" span.form-error-general").html(o.text):($(a+" div#field-"+o.element).addClass("error"),$(a+" div#field-"+o.element+" span.field-error").html(o.text))}else 0<$(a+"_success").length&&$(a+"_success").show();r(e,a,s)})},postFormCallback:function(result,formid,clickedButton){$(formid+" .loading").hide(),$(formid+" button.save").show(),0<$(formid+" button.previous").length&&$(formid+" button.previous").show();try{var jsonResult=JSON.parse(result);void 0!==jsonResult.errors&&0!==jsonResult.errors.length||(void 0!==$(clickedButton).data("close")&&""!==$(clickedButton).data("close")&&$("#wdg-lightbox-"+$(clickedButton).data("close")).hide(),void 0!==$(clickedButton).data("open")&&""!==$(clickedButton).data("open")&&$("#wdg-lightbox-"+$(clickedButton).data("open")).show())}catch(e){}var callbackFunctionName=$(clickedButton).data("callback");void 0!==callbackFunctionName&&""!==callbackFunctionName&&eval(callbackFunctionName)(result)}}}(jQuery);!function(u,o){"use strict";function a(e){this.elem=e}a.prototype={constructor:a,getValue:function(e){var t=this.elem.getAttribute("data-"+e);return null!=t&&t},share:function(){var e=this.getValue("sharer").toLowerCase(),t={facebook:{shareUrl:"https://www.facebook.com/sharer/sharer.php",params:{u:this.getValue("url")}},googleplus:{shareUrl:"https://plus.google.com/share",params:{url:this.getValue("url")}},linkedin:{shareUrl:"https://www.linkedin.com/shareArticle",params:{url:this.getValue("url"),mini:!0}},twitter:{shareUrl:"https://twitter.com/intent/tweet/",params:{text:this.getValue("title"),url:this.getValue("url"),hashtags:this.getValue("hashtags"),via:this.getValue("via")}},email:{shareUrl:"mailto:"+this.getValue("to"),params:{subject:this.getValue("subject"),body:this.getValue("title")+"\n"+this.getValue("url")},isLink:!0},whatsapp:{shareUrl:"whatsapp://send",params:{text:this.getValue("title")+" "+this.getValue("url")},isLink:!0},telegram:{shareUrl:"tg://msg_url",params:{text:this.getValue("title")+" "+this.getValue("url")},isLink:!0},viber:{shareUrl:"viber://forward",params:{text:this.getValue("title")+" "+this.getValue("url")},isLink:!0},line:{shareUrl:"http://line.me/R/msg/text/?"+encodeURIComponent(this.getValue("title")+" "+this.getValue("url")),isLink:!0},pinterest:{shareUrl:"https://www.pinterest.com/pin/create/button/",params:{url:this.getValue("url"),media:this.getValue("image"),description:this.getValue("description")}},tumblr:{shareUrl:"http://tumblr.com/widgets/share/tool",params:{canonicalUrl:this.getValue("url"),content:this.getValue("url"),posttype:"link",title:this.getValue("title"),caption:this.getValue("caption"),tags:this.getValue("tags")}},hackernews:{shareUrl:"https://news.ycombinator.com/submitlink",params:{u:this.getValue("url"),t:this.getValue("title")}},reddit:{shareUrl:"https://www.reddit.com/submit",params:{url:this.getValue("url")}},vk:{shareUrl:"http://vk.com/share.php",params:{url:this.getValue("url"),title:this.getValue("title"),description:this.getValue("caption"),image:this.getValue("image")}},xing:{shareUrl:"https://www.xing.com/app/user",params:{op:"share",url:this.getValue("url"),title:this.getValue("title")}},buffer:{shareUrl:"https://buffer.com/add",params:{url:this.getValue("url"),title:this.getValue("title"),via:this.getValue("via"),picture:this.getValue("picture")}},instapaper:{shareUrl:"http://www.instapaper.com/edit",params:{url:this.getValue("url"),title:this.getValue("title"),description:this.getValue("description")}},pocket:{shareUrl:"https://getpocket.com/save",params:{url:this.getValue("url")}},digg:{shareUrl:"http://www.digg.com/submit",params:{url:this.getValue("url")}},stumbleupon:{shareUrl:"http://www.stumbleupon.com/submit",params:{url:this.getValue("url"),title:this.getValue("title")}},flipboard:{shareUrl:"https://share.flipboard.com/bookmarklet/popout",params:{v:2,title:this.getValue("title"),url:this.getValue("url"),t:Date.now()}},weibo:{shareUrl:"http://service.weibo.com/share/share.php",params:{url:this.getValue("url"),title:this.getValue("title"),pic:this.getValue("image"),appkey:this.getValue("appkey"),ralateUid:this.getValue("ralateuid"),language:"zh_cn"}},renren:{shareUrl:"http://share.renren.com/share/buttonshare",params:{link:this.getValue("url")}},myspace:{shareUrl:"https://myspace.com/post",params:{u:this.getValue("url"),t:this.getValue("title"),c:this.getValue("description")}},blogger:{shareUrl:"https://www.blogger.com/blog-this.g",params:{u:this.getValue("url"),n:this.getValue("title"),t:this.getValue("description")}},baidu:{shareUrl:"http://cang.baidu.com/do/add",params:{it:this.getValue("title"),iu:this.getValue("url")}}}[e];return t&&(t.width=this.getValue("width"),t.height=this.getValue("height")),void 0!==t&&this.urlSharer(t)},urlSharer:function(e){var t,n=e.params||{},i=Object.keys(n),o=0<i.length?"?":"";for(t=0;t<i.length;t++)"?"!==o&&(o+="&"),n[i[t]]&&(o+=i[t]+"="+encodeURIComponent(n[i[t]]));if(e.shareUrl+=o,e.isLink)u.location.href=e.shareUrl;else{var a=e.width||600,r=e.height||480,s=u.innerWidth/2-a/2+u.screenX,c="scrollbars=no, width="+a+", height="+r+", top="+(u.innerHeight/2-r/2+u.screenY)+", left="+s,l=u.open(e.shareUrl,"",c);u.focus&&l.focus()}}},u.addEventListener("load",function(){function e(e){var t=e.currentTarget||e.srcElement;new a(t).share()}var t,n=o.querySelectorAll(".sharer"),i=n.length;for(t=0;t<i;t++)n[t].addEventListener("click",e)})}(window,document);