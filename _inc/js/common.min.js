jQuery(document).ready(function(e){YPUIFunctions.initUI(),WDGFormsFunctions.init()}),JSHelpers=(jQuery,{urldecode:function(e){return decodeURIComponent((e+"").replace(/\+/g,"%20"))},formatNumber:function(e,t){var i=(e=Math.round(100*e)/100).toString();if(e>1e3){var n=Math.floor(e/1e3);i=n+" ";var o=e-1e3*n;i+="000".substring(0,"000".length-o.toString().length)+o}return i=i.split(".").join(","),i+=" "+t}}),YPUIFunctions=function(e){return{currentLightbox:"",currentRequest:"",initUI:function(){if(WDGProjectPageFunctions.initUI(),YPUIFunctions.initQtip(),WDGLightboxFunctions.init(),e(document).scroll(function(){""===YPUIFunctions.currentLightbox&&(e(".menu-client").length>0?e(document).scrollTop()>110?(e("#nav").hide(),e(".menu-client").css("position","fixed"),e("#content.theme-myphotoreporter #projects-stats-content").css("top",60),e("#content.theme-myphotoreporter #post_bottom_bg").css("marginTop",60)):(e("#nav").show(),e(".menu-client").css("position","relative"),e("#content.theme-myphotoreporter #projects-stats-content").css("top",0),e("#content.theme-myphotoreporter #post_bottom_bg").css("marginTop",0)):e(document).scrollTop()>50?e("nav#main").css("marginTop",0):e("nav#main").css("marginTop",10),e(document).scrollTop()>250?e(".responsive-fixed").addClass("fixed"):e(".responsive-fixed").removeClass("fixed"))}),e("nav#main a.lines").click(function(t){e("nav#main a.lines").removeClass("current"),e(this).addClass("current"),e(this).addClass("select-nav")}),e(".btn-user").click(function(t){"#"==e(this).attr("href")&&(t.preventDefault(),e(".btn-user").hasClass("active")?(e(".btn-user").removeClass("active").addClass("inactive"),e("#submenu-user").hide()):(e(".btn-user").addClass("active").removeClass("inactive"),e("#submenu-user").show(),e("#btn-search, #btn-burger").removeClass("active").addClass("inactive"),e("#submenu-search").hide()))}),e("#btn-search, #btn-burger").click(function(t){t.preventDefault(),e("#btn-search, #btn-burger").hasClass("active")?(e("#btn-search, #btn-burger").removeClass("active").addClass("inactive"),e("#submenu-search").hide()):(e("#btn-search, #btn-burger").addClass("active").removeClass("inactive"),e("#submenu-search").show(),e("#submenu-search-input").focus(),e(".btn-user").removeClass("active").addClass("inactive"),e("#submenu-user").hide(),0==e("#submenu-search ul.submenu-list li").length&&e.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"get_searchable_projects_list"}}).done(function(t){for(var i=JSON.parse(t),n=i.length,o=0;o<n;o++)e("#submenu-search ul.submenu-list").append('<li class="hidden"><a href="https://www.wedogood.co/'+i[o].post_name+'">'+i[o].post_title+'<span class="hidden">'+i[o].post_title+"</span></a></li>");e("#submenu-search-input").trigger("keyup")}))}),e("#submenu-search-input").keyup(function(){function t(){WDGGETFUNKY_MARGINLEFT*=-1,e("#container div").animate({marginLeft:WDGGETFUNKY_MARGINLEFT},2e3,"swing",function(){t()})}var i=e("#submenu-search-input").val().toLowerCase();e("#submenu-search .submenu-list li").addClass("hidden"),""!=i&&e("#submenu-search .submenu-list li").each(function(){e(this).find("a").text().toLowerCase().indexOf(i)>-1&&e(this).removeClass("hidden")}),e("#submenu-search").height("auto"),"get funky!"===i&&(e("#container").empty(),e("#container").append('<div class="align-center" style="padding-top: 80px;"><iframe width="560" height="315" src="https://www.youtube.com/embed/kxopViU98Xo?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe></div>'),WDGGETFUNKY_MARGINLEFT=500,t())}),showOkConnect=function(){e(".model-form .submit-center").css("display","inline"),e(".model-form input#password").addClass("pwd_submit"),e(".model-form input.connect").addClass("ok_valid")},e("#menu .btn-user").click(function(){""!==e(".model-form #identifiant").val()&&""!==e(".model-form #password").val()&&showOkConnect()}),e(".model-form #identifiant").bind("keypress click",function(){showOkConnect()}),e(".model-form #password").bind("keypress click",function(){showOkConnect()}),e(window).mouseup(function(t){var i=e("#submenu-user"),n=e("#menu .btn-user"),o=e("#menu .btn-user img"),a=e("#submenu-search"),r=e("#menu #btn-search"),s=e("#menu #btn-search img"),c=e("#btn-burger"),l=e("#btn-burger img");i.is(t.target)||n.is(t.target)||o.is(t.target)||"block"!==i.css("display")||0!==i.has(t.target).length?a.is(t.target)||r.is(t.target)||s.is(t.target)||l.is(t.target)||"block"!==a.css("display")||0!==a.has(t.target).length||(a.hide(),r.removeClass("active").addClass("inactive"),c.removeClass("active").addClass("inactive")):(i.hide(),n.removeClass("active").addClass("inactive"))}),e(".social_connect_login_facebook").click(function(t){t.preventDefault(),e(".social_connect_login_facebook_loading").show(),e.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"get_connect_to_facebook_url",redirect:e(".social_connect_login_facebook").data("redirect")}}).done(function(e){e.indexOf("http")>-1?window.location=e:alert("Facebook Connection URL Error")}).fail(function(){alert("Facebook Connection Error")}).always(function(){e(".social_connect_login_facebook_loading").hide()})}),e("#subscribe-nl-mail").keypress(function(){e("#subscribe-nl-mail").addClass("retracted"),e("#subscribe-nl-submit").show()}),e(".expandator").css("cursor","pointer"),e(".expandable").not(".default-expanded").hide(),e(".expandator").click(function(){var t=e(this).data("target");e("#extendable-"+t).is(":visible")?e("#extendable-"+t).hide():e("#extendable-"+t).show()}),e("footer span.footer-subtitle.clickable").click(function(){e(window).width()<998&&(e(this).next().is(":visible")?(e(this).removeClass("expanded"),e(this).next().hide()):(e(this).addClass("expanded"),e(this).next().show()))}),e(".impacts-container .impact-logo").mouseover(function(){var t=YPUIFunctions.findPos(this).x;e(this).next().addClass("visible").removeClass("invisible"),e(this).next().css("left",t)}),e(".impacts-container .impact-logo").mouseout(function(){e(this).next().addClass("invisible").removeClass("visible")}),e(".home_video .button-video, .home_video .button-video-shadows").click(function(){e(".home_video .button-video, .home_video .button-video-shadows").hide();var t=".home_video .video-container",i="320",n="180";e(window).width()>570?(t+=".w570",i="570",n="321"):t+=".w320",e(t).append('<iframe src="https://www.youtube.com/embed/QJmhrCG5acU?feature=oembed&amp;rel=0&amp;wmode=transparent&amp;autoplay=1" style="border: none" allow="autoplay; encrypted-media" width="'+i+'" height="'+n+'"></iframe>'),e(t).show()}),e("#cookies-alert").length>0){"1"===YPUIFunctions.getCookie("hidecookiealert")&&e("#cookies-alert").hide(),e("#cookies-alert-close").click(function(){e("#cookies-alert").hide();var t=new Date;t.setTime(t.getTime()+864e7);var i="; expires="+t.toGMTString();document.cookie="hidecookiealert=1"+i+"; path=/"})}e("#fundingproject").val()&&(e("#goalsum_fixe").click(function(){e("#goalsum_flexible_param").hide(),e("#goalsum_fixe_param").show()}),e("#goalsum_flexible").click(function(){e("#goalsum_flexible_param").show(),e("#goalsum_fixe_param").hide()}),e("#goal_search").change(function(){e("#goal").val(Math.round(e("#goal_search").val()*e("#campaign_multiplier").val())),e("#goalsum_campaign_multi").text(e("#goal").val()+e("#monney").val())}),e("#minimum_goal_search").change(function(){e("#minimum_goal").val(Math.round(e("#minimum_goal_search").val()*e("#campaign_multiplier").val())),e("#goalsum_min_campaign_multi").text(e("#minimum_goal").val()+e("#monney").val())}),e("#maximum_goal_search").change(function(){e("#maximum_goal").val(Math.round(e("#maximum_goal_search").val()*e("#campaign_multiplier").val())),e("#goalsum_max_campaign_multi").text(e("#maximum_goal").val()+e("#monney").val())}),e(".radiofundingtype").change(function(){e("#fundingdevelopment_param").show(),"fundingproject"==e("input[name=fundingtype]:checked").val()&&e(".min_amount_value").text(e("#min_amount_project").val()),"fundingdevelopment"==e("input[name=fundingtype]:checked").val()&&e(".min_amount_value").text(e("#min_amount_development").val()),"fundingdonation"==e("input[name=fundingtype]:checked").val()&&(e("#fundingdevelopment_param").hide(),e(".min_amount_value").text(e("#min_amount_donation").val()))})),e("#company_status").length>0&&e("#company_status").change(function(){"Autre"==e("#company_status").val()?e("#company_status_other_zone").show():e("#company_status_other_zone").hide()}),e(".wp-editor-wrap")[0]&&setInterval(YPUIFunctions.onRemoveUploadInterval,1e3),e(".home-activity-list").length>0&&setTimeout(function(){YPUIFunctions.onSlideHomeActivity()},YPUIFunctions.homeslideInterval),e(".home-blog-list-nav").length>0&&e(".home-blog-list-nav a").click(function(){e(".home-blog-list-nav a").removeClass("selected"),e(this).addClass("selected"),e(".home-blog-list").animate({marginLeft:-e(this).data("targetitem")*YPUIFunctions.homeblogItemWidth},500)}),e("#scroll-to-utilite-societale").length>0&&e("#scroll-to-utilite-societale").click(function(){e("html, body").animate({scrollTop:e("#anchor-societal_challenge").offset().top-e("#navigation").height()},"slow")}),e(".alert-confirm").click(function(t){t.preventDefault(),confirm(e(this).data("alertconfirm"))&&(window.location.href=e(this).attr("href"))}),e(".ajax-investments-load").length>0&&(campaign_id=e(".ajax-investments-load").attr("data-value"),YPUIFunctions.getInvestments(campaign_id)),e("#jycrois-send-mail-selector").change(function(){this.checked?(e("#voted-send-mail-selector").prop("disabled",!0),e("#invested-send-mail-selector").prop("disabled",!0),e("#voted-send-mail-selector").prop("checked",!0),e("#invested-send-mail-selector").prop("checked",!0)):(e("#voted-send-mail-selector").prop("disabled",!1),e("#invested-send-mail-selector").prop("disabled",!1))}),e(".reward-table-param").length>0&&(checkNeedNewLines=function(){e(".reward-text").filter(function(){return""==e(this).val()}).length<=1&&(i=parseInt(e(".reward-text").last().prop("name").substring(12))+1,newline='<tr><td><input name="reward-name-'+i+'" type="text" name="" value="" placeholder="Nommez et d&eacute;crivez bri&egrave;vement la contrepartie" class="reward-text"/></td><td><input name="reward-amount-'+i+'" type="number" min="0" name="" value="" placeholder=""/></td><td><input name="reward-limit-'+i+'" type="number" min="0" name="" value="" placeholder=""/></td></tr>',e(".reward-table-param table tbody").append(newline),addListeners())},addListeners=function(){e(".reward-text").off().on("keyup change",function(){""===this.value?e(this).closest("tr").find("input").css("background-color","#CCC"):(e(this).closest("tr").find("input").css("background-color",""),checkNeedNewLines())}).trigger("change")},addListeners()),e("body.home.page").length>0&&e(".wdg-component-projects-preview .project-slider").length>0&&(e(".wdg-component-projects-preview .block-projects").width((e(".wdg-component-projects-preview .project-container").width()+5)*e(".wdg-component-projects-preview .project-container").length),e(".wdg-component-projects-preview .project-slider").scrollLeft((e(".wdg-component-projects-preview .block-projects").width()-e(".wdg-component-projects-preview .project-slider").width())/2)),e(".projects-current .wdg-component-projects-preview .project-slider .block-projects").width()>e(".projects-current .wdg-component-projects-preview .project-slider").width()&&e(".projects-current .wdg-component-projects-preview .project-slider").length>0&&(e(".projects-current .wdg-component-projects-preview .block-projects").width((e(".projects-current .wdg-component-projects-preview .project-container").width()+5)*e(".projects-current .wdg-component-projects-preview .project-container").length),e(".projects-current .wdg-component-projects-preview .project-slider").scrollLeft((e(".projects-current .wdg-component-projects-preview .block-projects").width()-e(".projects-current .wdg-component-projects-preview .project-slider").width())/2),e(".projects-funded .wdg-component-projects-preview .block-projects").width(e(".projects-funded .wdg-component-projects-preview .project-container").width()*e(".projects-funded .wdg-component-projects-preview .project-container.cat-entreprises").length)),e("#project-filter").length>0&&(e("#project-filter > span").click(function(){e("#project-filter span").hasClass("show")?e("#project-filter span").removeClass("show"):e("#project-filter span").addClass("show"),e("#project-filter select").toggle()}),e("#project-filter .project-filter-select").click(function(){var t=e("#project-filter-step").val(),i=e("#project-filter-location").val(),n=e("#project-filter-activity").val(),o=e("#project-filter-impact").val();YPUIFunctions.refreshProjectList(t,i,n,o)}),e("#project-filter-activity").val("entreprises"),e("#project-filter .project-filter-select").trigger("click"),e("div.padder.projects-funded button").click(function(){var t=e("div.padder.projects-funded .block-projects").height()+620;e("div.padder.projects-funded .block-projects").css("max-height",t);t>=620*Math.ceil(e("div.padder.projects-funded .block-projects .project-container").length/4)&&e("div.padder.projects-funded button").hide()}))},findPos:function(e){var t=y=0;if(e.offsetParent)for(t=e.offsetLeft,y=e.offsetTop;e===e.offsetParent;)t+=e.offsetLeft,y+=e.offsetTop;return{x:t,y:y}},getInvestsGraph:function(t,i){e.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"get_invests_graph",id_campaign:i,data:t}}).done(function(t){e("#ajax-invests-graph-load").after(t),e("#ajax-graph-loader-img").hide(),e("#canvas-line-block").slideDown()}).fail(function(){e("#ajax-invests-graph-load").after("<em>Le chargement du graphe a échoué</em>"),e("#ajax-graph-loader-img").hide(),e("#canvas-line-block").slideDown()})},getInvestments:function(t){YPUIFunctions.currentRequest=e.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"get_investments_data",id_campaign:t}}).done(function(i){YPUIFunctions.currentRequest="",inv_data=JSON.parse(i),e.each(inv_data,function(t,i){e(".data-inv-"+t).html(i)}),e(".ajax-data-inv-loader-img").slideUp(),e("#ajax-id-investors-load").length>0&&(e("#ajax-id-investors-load #img-investors").slideDown(),e("#ajax-id-investors-load #invested-send-mail-selector").slideDown(),list_id_inv=Object.keys(inv_data.investors_list).map(function(e){return inv_data.investors_list[e]}),e("#ajax-id-investors-load #invested-send-mail-list").val(list_id_inv)),e("#ajax-invests-graph-load").length>0&&YPUIFunctions.getInvestsGraph(JSON.stringify(inv_data),t),e("#ajax-contacts-load").length>0&&wdgCampaignDashboard.getContactsTable(JSON.stringify(inv_data),t)}).fail(function(){})},initQtip:function(){var t=0;return e(".infobutton, .qtip-element").each(function(){if(void 0==e(this).data("hasqtip")){var i,n={content:i=void 0!=e(this).attr("title")?e(this).attr("title"):e(this).next(".tooltiptext"),position:{my:"bottom center",at:"top center"},style:{classes:"wdgQtip qtip-dark qtip-rounded qtip-shadow"},hide:{fixed:!0,delay:300}};e(this).is("input[type=text], input[type=number], textarea")&&(n.show="focus",n.hide="blur");var o=e(this).data("tooltip");if(void 0!=o){var a=JSON.parse(o);for(var r in a)n[r]=a[r]}""!=i&&(e(this).qtip(n),t++)}}),t},onRemoveUploadInterval:function(){e(".media-frame-menu")[0]&&e(".media-frame-menu").remove(),e(".media-frame-router")[0]&&e(".media-frame-router").show()},homeblogItemWidth:570,homeslideItemWidth:960,homeslideInterval:3e3,onSlideHomeActivity:function(){var t=parseInt(e(".home-activity-list").css("margin-left").replace("px",""));t-=YPUIFunctions.homeslideItemWidth,e(".home-activity-list").width()<-1*t+1&&(t=0),e(".home-activity-list").animate({marginLeft:t},500),setTimeout(function(){YPUIFunctions.onSlideHomeActivity()},YPUIFunctions.homeslideInterval)},refreshProjectPreview:function(){e(".home-large-project").length>0&&e(".home-large-project").each(function(){var t=e(this).find(".description-zone"),i=e(this).find(".description-summary"),n=e(this).find(".description-discover"),o=e(this).find(".video-zone"),a=e(this).find(".description-middle"),r=e(this).find(".video-zone>iframe");r.length>0?e(t).height(e(r).height()):e(t).height(e(o).height());var s=e(t).height()-e(i).height()-e(n).height();e(a).css("top",e(i).height()-e(a).height()/2+s/2)})},refreshProjectList:function(t,i,n,o){var a=i.split(",");e(".wdg-component-projects-preview .block-projects .project-container").show(),e(".wdg-component-projects-preview .block-projects .project-container").each(function(){var r=e(this).data("categories");"all"!==t&&e(this).data("step")!==t&&e(this).hide(),"all"!==i&&-1===a.indexOf(e(this).data("location").toString())&&e(this).hide(),"all"!==n&&-1===r.indexOf(n)&&e(this).hide(),"all"!==o&&-1===r.indexOf(o)&&e(this).hide()})},getCookie:function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return""}}}(jQuery);var WDGLightboxFunctions=function(e){return{init:function(){if(e(".wdg-lightbox").length>0){e(".wdg-lightbox").each(function(){"1"==e(this).data("autoopen")&&WDGLightboxFunctions.displaySingle(e(this).attr("id").split("wdg-lightbox-")[1])}),e(".wdg-button-lightbox-open").not("#wdg-lightbox-newproject .wdg-button-lightbox-open").click(function(){WDGLightboxFunctions.displaySingle(e(this).data("lightbox"))}),e(".wdg-lightbox .wdg-lightbox-button-close a").click(function(e){e.preventDefault(),WDGLightboxFunctions.hideAll()}),e(".wdg-lightbox #wdg-lightbox-welcome-close").click(function(e){WDGLightboxFunctions.hideAll()}),e(".wdg-lightbox .wdg-lightbox-click-catcher").click(function(t){e(this).hasClass("disable")||WDGLightboxFunctions.hideAll()});var t=window.location.hash.substring(1);-1===t.indexOf("=")&&e("#wdg-lightbox-"+t).length>0&&WDGLightboxFunctions.displaySingle(t)}if(e(".timeout-lightbox").length>0){var i=2e3;e(".timeout-lightbox").data("duration")>0&&(i=e(".timeout-lightbox").data("duration")),setTimeout(function(){e(".timeout-lightbox").fadeOut()},i),e(".timeout-lightbox .wdg-lightbox-padder").click(function(){e(this).parent().hide()})}if(e("#wdg-lightbox-connexion").length>0&&e(".wdg-button-lightbox-open").click(function(){e("#wdg-lightbox-connexion .redirect-page").attr("value",e(this).data("redirect"))}),e("#wdg-lightbox-register").length>0&&e(".wdg-button-lightbox-open").click(function(){e("#wdg-lightbox-register .redirect-page").attr("value",e(this).data("redirect"))}),e("#newproject_form").length>0){if(e("#wdg-lightbox-newproject #connect-form .wdg-button-lightbox-open").click(function(t){t.preventDefault(),e("#wdg-lightbox-newproject #connect-form").hide(),e("#wdg-lightbox-newproject #newproject-register-user").show();var i=e("#wdg-lightbox-newproject #newproject-register-user form").attr("action");console.log(i),i=i.split("#register").join("#newproject"),e("#wdg-lightbox-newproject #newproject-register-user form").attr("action",i)}),e("#wdg-lightbox-newproject #newproject-register-user .wdg-button-lightbox-open").click(function(t){t.preventDefault(),e("#wdg-lightbox-newproject #newproject-register-user").hide(),e("#wdg-lightbox-newproject #connect-form").show()}),e("#newproject_form input#new-company-name").val(" "),e("#newproject_form div#field-new-company-name").hide(),""===e("#newproject_form input#company-name").val()&&e("#newproject_form #project-name").val(""),e("#newproject_form #select-company-name").on("keyup change",function(){e("#newproject_form div#field-new-company-name").hide();var t="";if(e("#newproject_form input#company-name").length>0&&""!==e("#newproject_form input#company-name").val())t=e("#newproject_form input#company-name").val(),e("#newproject_form #project-name").val("Projet de "+t),e("#newproject_form input#new-company-name").val(" ");else if(e("#newproject_form select[name=company-name]").length>0){"new_orga"!==e("#newproject_form select[name=company-name] option:selected").val()?(t=e("#newproject_form select[name=company-name] option:selected").text(),e("#newproject_form #project-name").val("Projet de "+t),e("#newproject_form input#new-company-name").val(" ")):(e("#newproject_form input#new-company-name").val(""),e("#newproject_form #project-name").val(""),e("#newproject_form div#field-new-company-name").show(),e("#newproject_form input#new-company-name").on("keyup change",function(){var t=e("#newproject_form input#new-company-name").val();""!=t?e("#newproject_form #project-name").val("Projet de "+t):e("#newproject_form #project-name").val("")}))}}),e("#newproject_form input#new-company-name").focus(function(){e("#newproject_form input#new-company-name").val("")}),""!==e("#newproject_form #company-name").val()){var n=e("#newproject_form #company-name option:selected").text();e("#newproject_form #project-name").val("Projet de "+n)}e("input, textarea","#newproject_form").keyup(function(){e("#newProject_button").find("button").prop("disabled",e("input, textarea","#newproject_form").filter(function(){return""==e(this).val()}).length>0||!e("#project-terms").is(":checked"))}),e("input, textarea","#newproject_form").trigger("keyup"),e("#project-terms").change(function(){e("input, textarea","#newproject_form").trigger("keyup")}),e("#newproject_form").submit(function(){e("#newProject_button").find(".button-text").hide(),e("#newProject_button").find(".button-waiting").show(),e("#newProject_button button").prop("disabled",!0)})}},displaySingle:function(t){if(""==t)return FALSE;"function"==typeof ga&&(ga("set",{page:document.location.pathname+"#"+t,title:document.title+" | "+t}),ga("send","pageview")),e(".wdg-lightbox").hide(),e("#wdg-lightbox-"+t).show(),"1"==e("#wdg-lightbox-"+t).data("scrolltop")&&WDGLightboxFunctions.scrollTop(e(".wdg-lightbox-padder")),YPUIFunctions.currentLightbox=t},hideAll:function(){e(".wdg-lightbox").hide(),YPUIFunctions.currentLightbox=""},scrollTop:function(t){e(".wdg-lightbox-padder").scrollTop(t.offset().top-75)}}}(jQuery),WDGFormsFunctions=function($){return{init:function(){WDGFormsFunctions.initSaveButton(),WDGFormsFunctions.initCheckboxes(),WDGFormsFunctions.initRateCheckboxes(),WDGFormsFunctions.initDatePickers(),WDGFormsFunctions.initFileInput()},initSaveButton:function(){$(".wdg-lightbox-ref .ajax-form button.save").click(function(e){e.preventDefault(),$(this).siblings(".loading").show(),$(this).siblings("button").hide(),$(this).hide();var t=$(this).parent().parent().parent().attr("id");WDGFormsFunctions.postForm("#"+t,WDGFormsFunctions.postFormCallback,this)}),$(".wdg-lightbox button.close, .wdg-lightbox-ref button.close").click(function(e){WDGLightboxFunctions.hideAll()}),$(".wdg-lightbox button.redirect, .wdg-lightbox-ref button.redirect").click(function(e){window.location=$(this).data("redirecturl")})},initCheckboxes:function(){$(".db-form.v3 input[type=checkbox]").length>0&&$(".db-form.v3 input[type=checkbox]").each(function(){$(this).hasClass("rate")||$(this).parent().hasClass("selectit")||($(this).parent().children("a").click(function(e){e.stopImmediatePropagation()}),$(this).parent().click(function(e){"1"!=$(this).data("keepdefault")&&e.preventDefault();var t=$(this).children("input[type=checkbox]")[0];t.checked=!t.checked}))})},initRateCheckboxes:function(){$(".db-form.v3 input[type=checkbox].rate").length>0&&$(".db-form.v3 input[type=checkbox].rate + span").click(function(){var e=$(this).data("rate");$("input[type=checkbox]."+e).attr("checked",!1);var t=$(this).data("value");WDGFormsFunctions.setRateCheckboxes(e,t)})},initDatePickers:function(){$("input[type=text].adddatepicker").datepicker({dateFormat:"dd/mm/yy",yearRange:"-120:+10",regional:"fr",changeMonth:!0,changeYear:!0})},initFileInput:function(){$(".field-file input").each(function(){var e=$(this),t=e.next("label"),i=t.html();e.on("change",function(e){var n="";this.files&&this.files.length>1?n=(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value&&(n=e.target.value.split("\\").pop()),n?(t.find("span").html(n),t.find("span.hide-when-filled").hide()):t.html(i),t.show(),t.css("display","inline-block"),t.next(".displayed-responsive").hide(),WDGLightboxFunctions.hideAll()})}),$("label.file-label").on("dragover",function(e){$(this).addClass("dragover"),e.stopPropagation(),e.preventDefault()}),$("label.file-label").on("dragleave",function(e){$(this).removeClass("dragover"),e.stopPropagation(),e.preventDefault()}),$("label.file-label").on("drop",function(e){e.stopPropagation(),e.preventDefault(),$(this).removeClass("dragover");var t=$(this).data("input");$("#"+t).prop("files",e.originalEvent.dataTransfer.files),$("#"+t).trigger("change")}),$("button.take-picture, button.import-file").click(function(e){e.stopPropagation(),e.preventDefault();var t=$(this).data("input-id");$(this).hasClass("take-picture")?($("#"+t).attr("accept","image/*"),$("#"+t).attr("capture","camera")):($("#"+t).attr("accept","*"),$("#"+t).attr("capture","")),$("#"+t).click()})},setRateCheckboxes:function(e,t){for(var i=1;i<=t;i++)$("input[type=checkbox]#"+e+"-"+i)[0].checked=!0;$("span#"+e+"-description").text($("input[type=checkbox]#"+e+"-"+t).data("description"))},postForm:function(e,t,i){$(e+" div.field").removeClass("error");var n={};if($(e).hasClass("has-files")?n=new FormData($(e)[0]):$(e+" input, "+e+" select, "+e+" textarea").each(function(){"checkbox"===$(this).attr("type")||"radio"===$(this).attr("type")?$(this).is(":checked")&&(n[$(this).attr("name")]=$(this).val()):n[$(this).attr("name")]=$(this).val()}),$(e).hasClass("has-files"))o={type:"POST",url:ajax_object.ajax_url,data:n,cache:!1,contentType:!1,processData:!1};else var o={type:"POST",url:ajax_object.ajax_url,data:n};$.ajax(o).done(function(n){var o=JSON.parse(n);if(void 0!=o.errors)for(var a=o.errors.length,r=0;r<a;r++){var s=o.errors[r];"general"==s.element?$(e+" span.form-error-general").html(s.text):($(e+" div#field-"+s.element).addClass("error"),$(e+" div#field-"+s.element+" span.field-error").html(s.text))}else $(e+"_success").length>0&&$(e+"_success").show();t(n,e,i)})},postFormCallback:function(result,formid,clickedButton){$(formid+" .loading").hide(),$(formid+" button.save").show(),$(formid+" button.previous").length>0&&$(formid+" button.previous").show();var jsonResult=JSON.parse(result);void 0!==jsonResult.errors&&0!==jsonResult.errors.length||(void 0!==$(clickedButton).data("close")&&""!==$(clickedButton).data("close")&&$("#wdg-lightbox-"+$(clickedButton).data("close")).hide(),void 0!==$(clickedButton).data("open")&&""!==$(clickedButton).data("open")&&$("#wdg-lightbox-"+$(clickedButton).data("open")).show());var callbackFunctionName=$(clickedButton).data("callback");void 0!==callbackFunctionName&&""!==callbackFunctionName&&eval(callbackFunctionName)(result)}}}(jQuery);WDGProjectPageFunctions=function(e){return{currentDiv:0,isInit:!1,isEditing:"",isClickBlocked:!1,navigationHeight:0,initUI:function(){WDGProjectPageFunctions.navigationHeight=e("nav.project-navigation").height()>0&&e("nav.project-navigation").is(":visible")?e("nav.project-navigation").height():e("nav").height(),WDGProjectPageFunctions.initClick(),e(".project-content-icon").click(function(){e("#project-content-"+e(this).data("content")).trigger("click")}),e(".project-content-icon").css("cursor","pointer"),e("#btn-validate_project-true").click(function(){e("#validate_project-true").show(),e("#validate_project-false").hide()}),e("#btn-validate_project-false").click(function(){e("#validate_project-false").show(),e("#validate_project-true").hide()})},update_jycrois:function(t,i,n){var o=n+"/images/";0==t?(jy_crois_temp=1,o+="grenage_projet.jpg",e("#jy-crois-btn").css("background-image",'url("'+o+'")'),e("#jy-crois-txt").text("J'y crois")):(jy_crois_temp=0,o+="jycrois_gris.png",e("#jy-crois-txt").text(""),e("#jy-crois-btn").css("background-image",'url("'+o+'")'));var a=e("#nb-jycrois").text();1==t?e("#nb-jycrois").text(parseInt(a)+1):e("#nb-jycrois").text(parseInt(a)-1),e(".jy-crois").attr("href","javascript:WDGProjectPageFunctions.update_jycrois("+jy_crois_temp+","+i+',"'+n+'")'),e.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"update_jy_crois",jy_crois:t,id_campaign:i}}).done(function(){})},share_btn_click:function(){e("#dialog").dialog({width:"350px",zIndex:5,draggable:!1,resizable:!1,autoOpen:!1,modal:!0,show:{effect:"blind",duration:300},hide:{effect:"blind",duration:300}}),e("#dialog").dialog("open")},initClick:function(){WDGProjectPageFunctions.currentDiv=0,e(".projects-more").remove(),e(".projects-desc-content").each(function(){if(e(this).find("p").length>1){e(this).css("cursor","pointer");var t="";(!WDGProjectPageFunctions.isInit&&0===WDGProjectPageFunctions.currentDiv||e(this).attr("id")==="project-content-"+WDGProjectPageFunctions.isEditing)&&(t='style="display:none"');var i='<div class="projects-more" data-value="'+WDGProjectPageFunctions.currentDiv+'" '+t+"></div>";e(this).find("div *:lt(1)").append(i),e(this).unbind("click"),e(this).click(function(){WDGProjectPageFunctions.clickItem(e(this))})}if((WDGProjectPageFunctions.isInit||WDGProjectPageFunctions.currentDiv>0)&&e(this).attr("id")!=="project-content-"+WDGProjectPageFunctions.isEditing){var n=e(this).children().children();e(this).find(n.not("*:eq(0)")).hide()}WDGProjectPageFunctions.currentDiv++}),e(".projects-desc-content img, .projects-desc-content .expandator, .projects-desc-content .edit-button, .projects-desc-content .edit-button-validate").click(function(){WDGProjectPageFunctions.isClickBlocked=!0}),WDGProjectPageFunctions.refreshEditable(),WDGProjectPageFunctions.isInit=!0},clickItem:function(t){if(!getSelection().toString()&&""===WDGProjectPageFunctions.isEditing&&!WDGProjectPageFunctions.isClickBlocked){var i=t.find(".projects-more");i.is(":visible")?(i.hide(400,function(){setTimeout(function(){var i=-60;e(document).width()<997&&(i=-45),e("html, body").animate({scrollTop:t.offset().top-WDGProjectPageFunctions.navigationHeight+i},"slow"),t.find(".zone-content > div, p, ul, table, blockquote, h1, h2, h3, h4, h5, h6").slideDown(400),WDGProjectPageFunctions.refreshEditable()},200)}),WDGProjectPageFunctions.hideOthers(parseInt(i.attr("data-value")))):(WDGProjectPageFunctions.hideOthers(-1),WDGProjectPageFunctions.refreshEditable())}WDGProjectPageFunctions.isClickBlocked=!1},hideOthers:function(t){var i=0;e(".projects-desc-content").each(function(){i!==t&&(e(this).find(".projects-more").slideDown(200),e(this).children().children().not("*:eq(0)").slideUp(400)),i++})},refreshEditable:function(){e(".projects-desc-content .zone-content").removeClass("editable"),e(".projects-desc-content").each(function(){var t=e(this).find(".projects-more"),i=e(this).attr("id").substr("project-content-".length);t.is(":visible")?WDGProjectPageFunctions.hideEditButton(i):e("#content").hasClass("editing")&&"statistics"!==i?(e(this).children(".zone-content").addClass("editable"),WDGProjectPageFunctions.showEditButton(i)):WDGProjectPageFunctions.hideEditButton(i)})},showEditButton:function(e){"undefined"!=typeof ProjectEditor&&ProjectEditor.showEditButton(e)},hideEditButton:function(e){"undefined"!=typeof ProjectEditor&&ProjectEditor.hideEditButton(e)}}}(jQuery),function(e,t){"use strict";var i=function(e){this.elem=e};i.prototype={constructor:i,getValue:function(e){var t=this.elem.getAttribute("data-"+e);return void 0!==t&&null!==t&&t},share:function(){var e=this.getValue("sharer").toLowerCase(),t={facebook:{shareUrl:"https://www.facebook.com/sharer/sharer.php",params:{u:this.getValue("url")}},googleplus:{shareUrl:"https://plus.google.com/share",params:{url:this.getValue("url")}},linkedin:{shareUrl:"https://www.linkedin.com/shareArticle",params:{url:this.getValue("url"),mini:!0}},twitter:{shareUrl:"https://twitter.com/intent/tweet/",params:{text:this.getValue("title"),url:this.getValue("url"),hashtags:this.getValue("hashtags"),via:this.getValue("via")}},email:{shareUrl:"mailto:"+this.getValue("to"),params:{subject:this.getValue("subject"),body:this.getValue("title")+"\n"+this.getValue("url")},isLink:!0},whatsapp:{shareUrl:"whatsapp://send",params:{text:this.getValue("title")+" "+this.getValue("url")},isLink:!0},telegram:{shareUrl:"tg://msg_url",params:{text:this.getValue("title")+" "+this.getValue("url")},isLink:!0},viber:{shareUrl:"viber://forward",params:{text:this.getValue("title")+" "+this.getValue("url")},isLink:!0},line:{shareUrl:"http://line.me/R/msg/text/?"+encodeURIComponent(this.getValue("title")+" "+this.getValue("url")),isLink:!0},pinterest:{shareUrl:"https://www.pinterest.com/pin/create/button/",params:{url:this.getValue("url"),media:this.getValue("image"),description:this.getValue("description")}},tumblr:{shareUrl:"http://tumblr.com/widgets/share/tool",params:{canonicalUrl:this.getValue("url"),content:this.getValue("url"),posttype:"link",title:this.getValue("title"),caption:this.getValue("caption"),tags:this.getValue("tags")}},hackernews:{shareUrl:"https://news.ycombinator.com/submitlink",params:{u:this.getValue("url"),t:this.getValue("title")}},reddit:{shareUrl:"https://www.reddit.com/submit",params:{url:this.getValue("url")}},vk:{shareUrl:"http://vk.com/share.php",params:{url:this.getValue("url"),title:this.getValue("title"),description:this.getValue("caption"),image:this.getValue("image")}},xing:{shareUrl:"https://www.xing.com/app/user",params:{op:"share",url:this.getValue("url"),title:this.getValue("title")}},buffer:{shareUrl:"https://buffer.com/add",params:{url:this.getValue("url"),title:this.getValue("title"),via:this.getValue("via"),picture:this.getValue("picture")}},instapaper:{shareUrl:"http://www.instapaper.com/edit",params:{url:this.getValue("url"),title:this.getValue("title"),description:this.getValue("description")}},pocket:{shareUrl:"https://getpocket.com/save",params:{url:this.getValue("url")}},digg:{shareUrl:"http://www.digg.com/submit",params:{url:this.getValue("url")}},stumbleupon:{shareUrl:"http://www.stumbleupon.com/submit",params:{url:this.getValue("url"),title:this.getValue("title")}},flipboard:{shareUrl:"https://share.flipboard.com/bookmarklet/popout",params:{v:2,title:this.getValue("title"),url:this.getValue("url"),t:Date.now()}},weibo:{shareUrl:"http://service.weibo.com/share/share.php",params:{url:this.getValue("url"),title:this.getValue("title"),pic:this.getValue("image"),appkey:this.getValue("appkey"),ralateUid:this.getValue("ralateuid"),language:"zh_cn"}},renren:{shareUrl:"http://share.renren.com/share/buttonshare",params:{link:this.getValue("url")}},myspace:{shareUrl:"https://myspace.com/post",params:{u:this.getValue("url"),t:this.getValue("title"),c:this.getValue("description")}},blogger:{shareUrl:"https://www.blogger.com/blog-this.g",params:{u:this.getValue("url"),n:this.getValue("title"),t:this.getValue("description")}},baidu:{shareUrl:"http://cang.baidu.com/do/add",params:{it:this.getValue("title"),iu:this.getValue("url")}}}[e];return t&&(t.width=this.getValue("width"),t.height=this.getValue("height")),void 0!==t&&this.urlSharer(t)},urlSharer:function(t){var i,n=t.params||{},o=Object.keys(n),a=o.length>0?"?":"";for(i=0;i<o.length;i++)"?"!==a&&(a+="&"),n[o[i]]&&(a+=o[i]+"="+encodeURIComponent(n[o[i]]));if(t.shareUrl+=a,t.isLink)e.location.href=t.shareUrl;else{var r=t.width||600,s=t.height||480,c=e.innerWidth/2-r/2+e.screenX,l="scrollbars=no, width="+r+", height="+s+", top="+(e.innerHeight/2-s/2+e.screenY)+", left="+c,u=e.open(t.shareUrl,"",l);e.focus&&u.focus()}}},e.addEventListener("load",function(){function e(e){var t=e.currentTarget||e.srcElement;new i(t).share()}var n,o=t.querySelectorAll(".sharer"),a=o.length;for(n=0;a>n;n++)o[n].addEventListener("click",e)})}(window,document);