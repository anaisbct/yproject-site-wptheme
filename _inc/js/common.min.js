jQuery(document).ready(function(e){YPUIFunctions.initUI(),WDGFormsFunctions.init()}),JSHelpers=(jQuery,{urldecode:function(e){return decodeURIComponent((e+"").replace(/\+/g,"%20"))}}),YPUIFunctions=function(l){return{currentLightbox:"",currentRequest:"",initUI:function(){WDGProjectPageFunctions.initUI(),YPUIFunctions.initQtip(),WDGLightboxFunctions.init(),l(document).scroll(function(){""===YPUIFunctions.currentLightbox&&(0<l(".menu-client").length?110<l(document).scrollTop()?(l("#nav").hide(),l(".menu-client").css("position","fixed"),l("#content.theme-myphotoreporter #projects-stats-content").css("top",60),l("#content.theme-myphotoreporter #post_bottom_bg").css("marginTop",60)):(l("#nav").show(),l(".menu-client").css("position","relative"),l("#content.theme-myphotoreporter #projects-stats-content").css("top",0),l("#content.theme-myphotoreporter #post_bottom_bg").css("marginTop",0)):50<l(document).scrollTop()?l("nav#main").css("marginTop",0):l("nav#main").css("marginTop",10),250<l(document).scrollTop()?l(".responsive-fixed").addClass("fixed"):l(".responsive-fixed").removeClass("fixed"))}),l("nav#main a.lines").click(function(e){l("nav#main a.lines").removeClass("current"),l(this).addClass("current"),l(this).addClass("select-nav")}),l(".btn-user").click(function(e){"#"==l(this).attr("href")&&(e.preventDefault(),l(".btn-user").hasClass("active")?(l(".btn-user").removeClass("active").addClass("inactive"),l("#submenu-user").hide()):(l(".btn-user").addClass("active").removeClass("inactive"),l("#submenu-user").show(),l("#btn-search, #btn-burger").removeClass("active").addClass("inactive"),l("#submenu-search").hide()))}),l("#btn-search, #btn-burger").click(function(e){e.preventDefault(),l("#btn-search, #btn-burger").hasClass("active")?(l("#btn-search, #btn-burger").removeClass("active").addClass("inactive"),l("#submenu-search").hide()):(l("#btn-search, #btn-burger").addClass("active").removeClass("inactive"),l("#submenu-search").show(),l("#submenu-search-input").focus(),l(".btn-user").removeClass("active").addClass("inactive"),l("#submenu-user").hide())}),l("#submenu-search-input").keyup(function(){var e=l("#submenu-search-input").val().toLowerCase();if(l("#submenu-search .submenu-list li").addClass("hidden"),""!=e&&l("#submenu-search .submenu-list li").each(function(){-1<l(this).find("a").text().toLowerCase().indexOf(e)&&l(this).removeClass("hidden")}),l("#submenu-search").height("auto"),"get funky!"===e){l("#container").empty(),l("#container").append('<div class="align-center" style="padding-top: 80px;"><iframe width="560" height="315" src="https://www.youtube.com/embed/kxopViU98Xo?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe></div>'),WDGGETFUNKY_MARGINLEFT=500,function e(){WDGGETFUNKY_MARGINLEFT*=-1;l("#container div").animate({marginLeft:WDGGETFUNKY_MARGINLEFT},2e3,"swing",function(){e()})}()}}),showOkConnect=function(){l(".model-form .submit-center").css("display","inline"),l(".model-form input#password").addClass("pwd_submit"),l(".model-form input.connect").addClass("ok_valid")},l("#menu .btn-user").click(function(){""!==l(".model-form #identifiant").val()&&""!==l(".model-form #password").val()&&showOkConnect()}),l(".model-form #identifiant").bind("keypress click",function(){showOkConnect()}),l(".model-form #password").bind("keypress click",function(){showOkConnect()}),l(window).mouseup(function(e){var t=l("#submenu-user"),i=l("#menu .btn-user"),n=l("#menu .btn-user img"),o=l("#submenu-search"),a=l("#menu #btn-search"),r=l("#menu #btn-search img"),s=l("#btn-burger"),c=l("#btn-burger img");t.is(e.target)||i.is(e.target)||n.is(e.target)||"block"!==t.css("display")||0!==t.has(e.target).length?o.is(e.target)||a.is(e.target)||r.is(e.target)||c.is(e.target)||"block"!==o.css("display")||0!==o.has(e.target).length||(o.hide(),a.removeClass("active").addClass("inactive"),s.removeClass("active").addClass("inactive")):(t.hide(),i.removeClass("active").addClass("inactive"))}),l(".social_connect_login_facebook").click(function(e){e.preventDefault(),l(".social_connect_login_facebook_loading").show(),l.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"get_connect_to_facebook_url",redirect:l(".social_connect_login_facebook").data("redirect")}}).done(function(e){-1<e.indexOf("http")?window.location=e:alert("Facebook Connection URL Error")}).fail(function(){alert("Facebook Connection Error")}).always(function(){l(".social_connect_login_facebook_loading").hide()})}),l("#subscribe-nl-mail").keypress(function(){l("#subscribe-nl-mail").addClass("retracted"),l("#subscribe-nl-submit").show()}),l(".expandator").css("cursor","pointer"),l(".expandable").not(".default-expanded").hide(),l(".expandator").click(function(){var e=l(this).data("target");l("#extendable-"+e).is(":visible")?l("#extendable-"+e).hide():l("#extendable-"+e).show()}),l("footer span.footer-subtitle.clickable").click(function(){l(window).width()<998&&(l(this).next().is(":visible")?(l(this).removeClass("expanded"),l(this).next().hide()):(l(this).addClass("expanded"),l(this).next().show()))}),l(".impacts-container .impact-logo").mouseover(function(){var e=YPUIFunctions.findPos(this).x;l(this).next().addClass("visible").removeClass("invisible"),l(this).next().css("left",e)}),l(".impacts-container .impact-logo").mouseout(function(){l(this).next().addClass("invisible").removeClass("visible")}),l(".home_video .button-video, .home_video .button-video-shadows").click(function(){l(".home_video .button-video, .home_video .button-video-shadows").hide();var e=".home_video .video-container",t="320",i="180";570<l(window).width()?(e+=".w570",t="570",i="321"):e+=".w320",l(e).append('<iframe src="https://www.youtube.com/embed/QJmhrCG5acU?feature=oembed&amp;rel=0&amp;wmode=transparent&amp;autoplay=1" style="border: none" allow="autoplay; encrypted-media" width="'+t+'" height="'+i+'"></iframe>'),l(e).show()}),0<l("#cookies-alert").length&&l("#cookies-alert-close").click(function(){l("#cookies-alert").hide();var e=new Date;e.setTime(e.getTime()+864e7);var t="; expires="+e.toGMTString();document.cookie="hidecookiealert=1"+t+"; path=/"}),l("#fundingproject").val()&&(l("#goalsum_fixe").click(function(){l("#goalsum_flexible_param").hide(),l("#goalsum_fixe_param").show()}),l("#goalsum_flexible").click(function(){l("#goalsum_flexible_param").show(),l("#goalsum_fixe_param").hide()}),l("#goal_search").change(function(){l("#goal").val(Math.round(l("#goal_search").val()*l("#campaign_multiplier").val())),l("#goalsum_campaign_multi").text(l("#goal").val()+l("#monney").val())}),l("#minimum_goal_search").change(function(){l("#minimum_goal").val(Math.round(l("#minimum_goal_search").val()*l("#campaign_multiplier").val())),l("#goalsum_min_campaign_multi").text(l("#minimum_goal").val()+l("#monney").val())}),l("#maximum_goal_search").change(function(){l("#maximum_goal").val(Math.round(l("#maximum_goal_search").val()*l("#campaign_multiplier").val())),l("#goalsum_max_campaign_multi").text(l("#maximum_goal").val()+l("#monney").val())}),l(".radiofundingtype").change(function(){l("#fundingdevelopment_param").show(),"fundingproject"==l("input[name=fundingtype]:checked").val()&&l(".min_amount_value").text(l("#min_amount_project").val()),"fundingdevelopment"==l("input[name=fundingtype]:checked").val()&&l(".min_amount_value").text(l("#min_amount_development").val()),"fundingdonation"==l("input[name=fundingtype]:checked").val()&&(l("#fundingdevelopment_param").hide(),l(".min_amount_value").text(l("#min_amount_donation").val()))})),0<l("#company_status").length&&l("#company_status").change(function(){"Autre"==l("#company_status").val()?l("#company_status_other_zone").show():l("#company_status_other_zone").hide()}),l(".wp-editor-wrap")[0]&&setInterval(YPUIFunctions.onRemoveUploadInterval,1e3),0<l(".home-activity-list").length&&setTimeout(function(){YPUIFunctions.onSlideHomeActivity()},YPUIFunctions.homeslideInterval),0<l(".home-blog-list-nav").length&&l(".home-blog-list-nav a").click(function(){l(".home-blog-list-nav a").removeClass("selected"),l(this).addClass("selected"),l(".home-blog-list").animate({marginLeft:-l(this).data("targetitem")*YPUIFunctions.homeblogItemWidth},500)}),0<l("#scroll-to-utilite-societale").length&&l("#scroll-to-utilite-societale").click(function(){l("html, body").animate({scrollTop:l("#anchor-societal_challenge").offset().top-l("#navigation").height()},"slow")}),l(".alert-confirm").click(function(e){e.preventDefault(),confirm(l(this).data("alertconfirm"))&&(window.location.href=l(this).attr("href"))}),0<l(".ajax-investments-load").length&&(campaign_id=l(".ajax-investments-load").attr("data-value"),YPUIFunctions.getInvestments(campaign_id)),l("#jycrois-send-mail-selector").change(function(){this.checked?(l("#voted-send-mail-selector").prop("disabled",!0),l("#invested-send-mail-selector").prop("disabled",!0),l("#voted-send-mail-selector").prop("checked",!0),l("#invested-send-mail-selector").prop("checked",!0)):(l("#voted-send-mail-selector").prop("disabled",!1),l("#invested-send-mail-selector").prop("disabled",!1))}),0<l(".reward-table-param").length&&(checkNeedNewLines=function(){l(".reward-text").filter(function(){return""==l(this).val()}).length<=1&&(i=parseInt(l(".reward-text").last().prop("name").substring(12))+1,newline='<tr><td><input name="reward-name-'+i+'" type="text" name="" value="" placeholder="Nommez et d&eacute;crivez bri&egrave;vement la contrepartie" class="reward-text"/></td><td><input name="reward-amount-'+i+'" type="number" min="0" name="" value="" placeholder=""/></td><td><input name="reward-limit-'+i+'" type="number" min="0" name="" value="" placeholder=""/></td></tr>',l(".reward-table-param table tbody").append(newline),addListeners())},addListeners=function(){l(".reward-text").off().on("keyup change",function(){""===this.value?l(this).closest("tr").find("input").css("background-color","#CCC"):(l(this).closest("tr").find("input").css("background-color",""),checkNeedNewLines())}).trigger("change")},addListeners()),0<l("body.home.page").length&&0<l(".wdg-component-projects-preview .project-slider").length&&(l(".wdg-component-projects-preview .block-projects").width((l(".wdg-component-projects-preview .project-container").width()+5)*l(".wdg-component-projects-preview .project-container").length),l(".wdg-component-projects-preview .project-slider").scrollLeft((l(".wdg-component-projects-preview .block-projects").width()-l(".wdg-component-projects-preview .project-slider").width())/2)),l(".projects-current .wdg-component-projects-preview .project-slider .block-projects").width()>l(".projects-current .wdg-component-projects-preview .project-slider").width()&&0<l(".projects-current .wdg-component-projects-preview .project-slider").length&&(l(".projects-current .wdg-component-projects-preview .block-projects").width((l(".projects-current .wdg-component-projects-preview .project-container").width()+5)*l(".projects-current .wdg-component-projects-preview .project-container").length),l(".projects-current .wdg-component-projects-preview .project-slider").scrollLeft((l(".projects-current .wdg-component-projects-preview .block-projects").width()-l(".projects-current .wdg-component-projects-preview .project-slider").width())/2),l(".projects-funded .wdg-component-projects-preview .block-projects").width(l(".projects-funded .wdg-component-projects-preview .project-container").width()*l(".projects-funded .wdg-component-projects-preview .project-container.cat-entreprises").length)),0<l("#project-filter").length&&(l("#project-filter > span").click(function(){l("#project-filter span").hasClass("show")?l("#project-filter span").removeClass("show"):l("#project-filter span").addClass("show"),l("#project-filter select").toggle()}),l("#project-filter .project-filter-select").click(function(){var e=l("#project-filter-step").val(),t=l("#project-filter-location").val(),i=l("#project-filter-activity").val(),n=l("#project-filter-impact").val();YPUIFunctions.refreshProjectList(e,t,i,n)}),l("#project-filter-activity").val("entreprises"),l("#project-filter .project-filter-select").trigger("click"),l("div.padder.projects-funded button").click(function(){var e=l("div.padder.projects-funded .block-projects").height()+620;l("div.padder.projects-funded .block-projects").css("max-height",e),620*Math.ceil(l("div.padder.projects-funded .block-projects .project-container").length/4)<=e&&l("div.padder.projects-funded button").hide()}))},findPos:function(e){var t=y=0;if(e.offsetParent)for(t=e.offsetLeft,y=e.offsetTop;e===e.offsetParent;)t+=e.offsetLeft,y+=e.offsetTop;return{x:t,y:y}},getInvestsGraph:function(e,t){l.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"get_invests_graph",id_campaign:t,data:e}}).done(function(e){l("#ajax-invests-graph-load").after(e),l("#ajax-graph-loader-img").hide(),l("#canvas-line-block").slideDown()}).fail(function(){l("#ajax-invests-graph-load").after("<em>Le chargement du graphe a échoué</em>"),l("#ajax-graph-loader-img").hide(),l("#canvas-line-block").slideDown()})},getInvestments:function(t){YPUIFunctions.currentRequest=l.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"get_investments_data",id_campaign:t}}).done(function(e){YPUIFunctions.currentRequest="",inv_data=JSON.parse(e),l.each(inv_data,function(e,t){l(".data-inv-"+e).html(t)}),l(".ajax-data-inv-loader-img").slideUp(),0<l("#ajax-id-investors-load").length&&(l("#ajax-id-investors-load #img-investors").slideDown(),l("#ajax-id-investors-load #invested-send-mail-selector").slideDown(),list_id_inv=Object.keys(inv_data.investors_list).map(function(e){return inv_data.investors_list[e]}),l("#ajax-id-investors-load #invested-send-mail-list").val(list_id_inv)),0<l("#ajax-invests-graph-load").length&&YPUIFunctions.getInvestsGraph(JSON.stringify(inv_data),t),0<l("#ajax-contacts-load").length&&wdgCampaignDashboard.getContactsTable(JSON.stringify(inv_data),t)}).fail(function(){})},initQtip:function(){var a=0;return l(".infobutton, .qtip-element").each(function(){if(null==l(this).data("hasqtip")){var e,t={content:e=null!=l(this).attr("title")?l(this).attr("title"):l(this).next(".tooltiptext"),position:{my:"bottom center",at:"top center"},style:{classes:"wdgQtip qtip-dark qtip-rounded qtip-shadow"},hide:{fixed:!0,delay:300}};l(this).is("input[type=text], input[type=number], textarea")&&(t.show="focus",t.hide="blur");var i=l(this).data("tooltip");if(null!=i){var n=JSON.parse(i);for(var o in n)t[o]=n[o]}""!=e&&(l(this).qtip(t),a++)}}),a},onRemoveUploadInterval:function(){l(".media-frame-menu")[0]&&l(".media-frame-menu").remove(),l(".media-frame-router")[0]&&l(".media-frame-router").show()},homeblogItemWidth:570,homeslideItemWidth:960,homeslideInterval:3e3,onSlideHomeActivity:function(){var e=parseInt(l(".home-activity-list").css("margin-left").replace("px",""));e-=YPUIFunctions.homeslideItemWidth,l(".home-activity-list").width()<-1*e+1&&(e=0),l(".home-activity-list").animate({marginLeft:e},500),setTimeout(function(){YPUIFunctions.onSlideHomeActivity()},YPUIFunctions.homeslideInterval)},refreshProjectPreview:function(){0<l(".home-large-project").length&&l(".home-large-project").each(function(){var e=l(this).find(".description-zone"),t=l(this).find(".description-summary"),i=l(this).find(".description-discover"),n=l(this).find(".video-zone"),o=l(this).find(".description-middle"),a=l(this).find(".video-zone>iframe");0<a.length?l(e).height(l(a).height()):l(e).height(l(n).height());var r=l(e).height()-l(t).height()-l(i).height();l(o).css("top",l(t).height()-l(o).height()/2+r/2)})},refreshProjectList:function(t,i,n,o){var a=i.split(",");l(".wdg-component-projects-preview .block-projects .project-container").show(),l(".wdg-component-projects-preview .block-projects .project-container").each(function(){var e=l(this).data("categories");"all"!==t&&l(this).data("step")!==t&&l(this).hide(),"all"!==i&&-1===a.indexOf(l(this).data("location").toString())&&l(this).hide(),"all"!==n&&-1===e.indexOf(n)&&l(this).hide(),"all"!==o&&-1===e.indexOf(o)&&l(this).hide()})},getCookie:function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return""}}}(jQuery);var WDGLightboxFunctions=function(n){return{init:function(){if(0<n(".wdg-lightbox").length){n(".wdg-lightbox").each(function(){"1"==n(this).data("autoopen")&&WDGLightboxFunctions.displaySingle(n(this).attr("id").split("wdg-lightbox-")[1])}),n(".wdg-button-lightbox-open").not("#wdg-lightbox-newproject .wdg-button-lightbox-open").click(function(){WDGLightboxFunctions.displaySingle(n(this).data("lightbox"))}),n(".wdg-lightbox .wdg-lightbox-button-close a").click(function(e){e.preventDefault(),WDGLightboxFunctions.hideAll()}),n(".wdg-lightbox #wdg-lightbox-welcome-close").click(function(e){WDGLightboxFunctions.hideAll()}),n(".wdg-lightbox .wdg-lightbox-click-catcher").click(function(e){n(this).hasClass("disable")||WDGLightboxFunctions.hideAll()});var e=window.location.hash.substring(1);-1===e.indexOf("=")&&0<n("#wdg-lightbox-"+e).length&&WDGLightboxFunctions.displaySingle(e)}if(0<n(".timeout-lightbox").length){var t=2e3;0<n(".timeout-lightbox").data("duration")&&(t=n(".timeout-lightbox").data("duration")),setTimeout(function(){n(".timeout-lightbox").fadeOut()},t)}if(0<n("#wdg-lightbox-connexion").length&&n(".wdg-button-lightbox-open").click(function(){n("#wdg-lightbox-connexion .redirect-page").attr("value",n(this).data("redirect"))}),0<n("#wdg-lightbox-register").length&&n(".wdg-button-lightbox-open").click(function(){n("#wdg-lightbox-register .redirect-page").attr("value",n(this).data("redirect"))}),0<n("#newproject_form").length){if(n("#wdg-lightbox-newproject #connect-form .wdg-button-lightbox-open").click(function(e){e.preventDefault(),n("#wdg-lightbox-newproject #connect-form").hide(),n("#wdg-lightbox-newproject #newproject-register-user").show();var t=n("#wdg-lightbox-newproject #newproject-register-user form").attr("action");console.log(t),t=t.split("#register").join("#newproject"),n("#wdg-lightbox-newproject #newproject-register-user form").attr("action",t)}),n("#wdg-lightbox-newproject #newproject-register-user .wdg-button-lightbox-open").click(function(e){e.preventDefault(),n("#wdg-lightbox-newproject #newproject-register-user").hide(),n("#wdg-lightbox-newproject #connect-form").show()}),n("#newproject_form input#new-company-name").val(" "),n("#newproject_form input#new-company-name").parent().parent().parent().hide(),""===n("#newproject_form input#company-name").val()&&n("#newproject_form #project-name").val(""),n("#newproject_form #company-name").on("keyup change",function(){n("#newproject_form input#new-company-name").parent().parent().parent().hide();var e="";0<n("#newproject_form input#company-name").length&&""!==n("#newproject_form input#company-name").val()?(e=n("#newproject_form input#company-name").val(),n("#newproject_form #project-name").val("Projet de "+e),n("#newproject_form input#new-company-name").val(" ")):0<n("#newproject_form select[name=company-name]").length&&("new_orga"!==n("#newproject_form select[name=company-name] option:selected").val()?(e=n("#newproject_form select[name=company-name] option:selected").text(),n("#newproject_form #project-name").val("Projet de "+e),n("#newproject_form input#new-company-name").val(" ")):(n("#newproject_form input#new-company-name").val(""),n("#newproject_form #project-name").val(""),n("#newproject_form input#new-company-name").parent().parent().parent().show(),n("#newproject_form input#new-company-name").on("keyup change",function(){var e=n("#newproject_form input#new-company-name").val();""!=e?n("#newproject_form #project-name").val("Projet de "+e):n("#newproject_form #project-name").val("")})))}),n("#newproject_form input#new-company-name").focus(function(){n("#newproject_form input#new-company-name").val("")}),""!==n("#newproject_form #company-name").val()){var i=n("#newproject_form #company-name option:selected").text();n("#newproject_form #project-name").val("Projet de "+i)}n("input, textarea","#newproject_form").keyup(function(){n("#newProject_button").find("button").prop("disabled",0<n("input, textarea","#newproject_form").filter(function(){return""==n(this).val()}).length||!n("#project-terms").is(":checked"))}),n("input, textarea","#newproject_form").trigger("keyup"),n("#project-terms").change(function(){n("input, textarea","#newproject_form").trigger("keyup")}),n("#newproject_form").submit(function(){n("#newProject_button").find(".button-text").hide(),n("#newProject_button").find(".button-waiting").show(),n("#newProject_button button").prop("disabled",!0)})}},displaySingle:function(e){if(""==e)return FALSE;if("function"==typeof ga&&(ga("set",{page:document.location.pathname+"#"+e,title:document.title+" | "+e}),ga("send","pageview")),n(".wdg-lightbox").hide(),n("#wdg-lightbox-"+e).show(),"1"==n("#wdg-lightbox-"+e).data("scrolltop")&&WDGLightboxFunctions.scrollTop(n(".wdg-lightbox-padder")),n("html, body").css({overflow:"hidden",height:"100%"}),n("html, body").animate({scrollTop:0}),!n("#wdg-lightbox-"+e).hasClass("positioned")){var t=n("#wdg-lightbox-"+e).offset();n("#wdg-lightbox-"+e).css({top:0-t.top,left:0-t.left,width:n(window).width(),height:n(window).height()}),n("#wdg-lightbox-"+e).addClass("positioned")}YPUIFunctions.currentLightbox=e},hideAll:function(){n(".wdg-lightbox").hide(),n("html, body").css({overflow:"auto",height:"auto"}),YPUIFunctions.currentLightbox=""},scrollTop:function(e){n(".wdg-lightbox-padder").scrollTop(e.offset().top-75)}}}(jQuery),WDGFormsFunctions=function($){return{init:function(){WDGFormsFunctions.initSaveButton(),WDGFormsFunctions.initCheckboxes(),WDGFormsFunctions.initRateCheckboxes(),WDGFormsFunctions.initDatePickers(),WDGFormsFunctions.initFileInput()},initSaveButton:function(){$(".wdg-lightbox-ref .ajax-form button.save").click(function(e){e.preventDefault(),$(this).siblings(".loading").show(),$(this).siblings("button").hide(),$(this).hide();var t=$(this).parent().parent().parent().attr("id");WDGFormsFunctions.postForm("#"+t,WDGFormsFunctions.postFormCallback,this)}),$(".wdg-lightbox button.close, .wdg-lightbox-ref button.close").click(function(e){WDGLightboxFunctions.hideAll()}),$(".wdg-lightbox button.redirect, .wdg-lightbox-ref button.redirect").click(function(e){window.location=$(this).data("redirecturl")})},initCheckboxes:function(){0<$(".db-form.v3 input[type=checkbox]").length&&$(".db-form.v3 input[type=checkbox]").each(function(){$(this).hasClass("rate")||$(this).parent().hasClass("selectit")||$(this).parent().click(function(e){e.preventDefault();var t=$(this).children("input[type=checkbox]")[0];t.checked=!t.checked})})},initRateCheckboxes:function(){0<$(".db-form.v3 input[type=checkbox].rate").length&&$(".db-form.v3 input[type=checkbox].rate + span").click(function(){var e=$(this).data("rate");$("input[type=checkbox]."+e).attr("checked",!1);var t=$(this).data("value");WDGFormsFunctions.setRateCheckboxes(e,t)})},initDatePickers:function(){$("input[type=text].adddatepicker").datepicker({dateFormat:"dd/mm/yy",yearRange:"-120:+10",regional:"fr",changeMonth:!0,changeYear:!0})},initFileInput:function(){$(".field-file input").each(function(){var e=$(this),i=e.next("label"),n=i.html();e.on("change",function(e){var t="";this.files&&1<this.files.length?t=(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value&&(t=e.target.value.split("\\").pop()),t?(i.find("span").html(t),i.find("span.hide-when-filled").hide()):i.html(n)})}),$("label.file-label").on("dragover",function(e){$(this).addClass("dragover"),e.stopPropagation(),e.preventDefault()}),$("label.file-label").on("dragleave",function(e){$(this).removeClass("dragover"),e.stopPropagation(),e.preventDefault()}),$("label.file-label").on("drop",function(e){e.stopPropagation(),e.preventDefault(),$(this).removeClass("dragover");var t=$(this).data("input");$("#"+t).prop("files",e.originalEvent.dataTransfer.files),$("#"+t).trigger("change")})},setRateCheckboxes:function(e,t){for(var i=1;i<=t;i++)$("input[type=checkbox]#"+e+"-"+i)[0].checked=!0;$("span#"+e+"-description").text($("input[type=checkbox]#"+e+"-"+t).data("description"))},postForm:function(a,r,s){$(a+" div.field").removeClass("error");var e={};if($(a).hasClass("has-files")?e=new FormData($(a)[0]):$(a+" input, "+a+" select, "+a+" textarea").each(function(){"checkbox"===$(this).attr("type")||"radio"===$(this).attr("type")?$(this).is(":checked")&&(e[$(this).attr("name")]=$(this).val()):e[$(this).attr("name")]=$(this).val()}),$(a).hasClass("has-files"))var t={type:"POST",url:ajax_object.ajax_url,data:e,cache:!1,contentType:!1,processData:!1};else t={type:"POST",url:ajax_object.ajax_url,data:e};$.ajax(t).done(function(e){var t=JSON.parse(e);if(null!=t.errors)for(var i=t.errors.length,n=0;n<i;n++){var o=t.errors[n];"general"==o.element?$(a+" span.form-error-general").html(o.text):($(a+" div#field-"+o.element).addClass("error"),$(a+" div#field-"+o.element+" span.field-error").html(o.text))}else 0<$(a+"_success").length&&$(a+"_success").show();r(e,a,s)})},postFormCallback:function(result,formid,clickedButton){$(formid+" .loading").hide(),$(formid+" button.save").show(),0<$(formid+" button.previous").length&&$(formid+" button.previous").show();var jsonResult=JSON.parse(result);void 0!==jsonResult.errors&&0!==jsonResult.errors.length||(void 0!==$(clickedButton).data("close")&&""!==$(clickedButton).data("close")&&$("#wdg-lightbox-"+$(clickedButton).data("close")).hide(),void 0!==$(clickedButton).data("open")&&""!==$(clickedButton).data("open")&&$("#wdg-lightbox-"+$(clickedButton).data("open")).show());var callbackFunctionName=$(clickedButton).data("callback");void 0!==callbackFunctionName&&""!==callbackFunctionName&&eval(callbackFunctionName)(result)}}}(jQuery);WDGProjectPageFunctions=function(a){return{currentDiv:0,isInit:!1,isEditing:"",isClickBlocked:!1,navigationHeight:0,initUI:function(){WDGProjectPageFunctions.navigationHeight=0<a("nav.project-navigation").height()&&a("nav.project-navigation").is(":visible")?a("nav.project-navigation").height():a("nav").height(),WDGProjectPageFunctions.initClick(),a(".project-content-icon").click(function(){a("#project-content-"+a(this).data("content")).trigger("click")}),a(".project-content-icon").css("cursor","pointer"),a("#btn-validate_project-true").click(function(){a("#validate_project-true").show(),a("#validate_project-false").hide()}),a("#btn-validate_project-false").click(function(){a("#validate_project-false").show(),a("#validate_project-true").hide()})},update_jycrois:function(e,t,i){var n=i+"/images/";0==e?(jy_crois_temp=1,n+="grenage_projet.jpg",a("#jy-crois-btn").css("background-image",'url("'+n+'")'),a("#jy-crois-txt").text("J'y crois")):(jy_crois_temp=0,n+="jycrois_gris.png",a("#jy-crois-txt").text(""),a("#jy-crois-btn").css("background-image",'url("'+n+'")'));var o=a("#nb-jycrois").text();1==e?a("#nb-jycrois").text(parseInt(o)+1):a("#nb-jycrois").text(parseInt(o)-1),a(".jy-crois").attr("href","javascript:WDGProjectPageFunctions.update_jycrois("+jy_crois_temp+","+t+',"'+i+'")'),a.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"update_jy_crois",jy_crois:e,id_campaign:t}}).done(function(){})},share_btn_click:function(){a("#dialog").dialog({width:"350px",zIndex:5,draggable:!1,resizable:!1,autoOpen:!1,modal:!0,show:{effect:"blind",duration:300},hide:{effect:"blind",duration:300}}),a("#dialog").dialog("open")},initClick:function(){WDGProjectPageFunctions.currentDiv=0,a(".projects-more").remove(),a(".projects-desc-content").each(function(){if(1<a(this).find("p").length){a(this).css("cursor","pointer");var e="";(!WDGProjectPageFunctions.isInit&&0===WDGProjectPageFunctions.currentDiv||a(this).attr("id")==="project-content-"+WDGProjectPageFunctions.isEditing)&&(e='style="display:none"');var t='<div class="projects-more" data-value="'+WDGProjectPageFunctions.currentDiv+'" '+e+"></div>";a(this).find("div *:lt(1)").append(t),a(this).unbind("click"),a(this).click(function(){WDGProjectPageFunctions.clickItem(a(this))})}if((WDGProjectPageFunctions.isInit||0<WDGProjectPageFunctions.currentDiv)&&a(this).attr("id")!=="project-content-"+WDGProjectPageFunctions.isEditing){var i=a(this).children().children();a(this).find(i.not("*:eq(0)")).hide()}WDGProjectPageFunctions.currentDiv++}),a(".projects-desc-content img, .projects-desc-content .expandator, .projects-desc-content .edit-button, .projects-desc-content .edit-button-validate, .projects-desc-content .cancel-button").click(function(){WDGProjectPageFunctions.isClickBlocked=!0}),WDGProjectPageFunctions.refreshEditable(),WDGProjectPageFunctions.isInit=!0},clickItem:function(t){if(!getSelection().toString()&&!WDGProjectPageFunctions.isClickBlocked){var e=t.find(".projects-more");e.is(":visible")?(e.hide(400,function(){setTimeout(function(){var e=-60;a(document).width()<997&&(e=-45),a("html, body").animate({scrollTop:t.offset().top-WDGProjectPageFunctions.navigationHeight+e},"slow"),t.find(".zone-content > div, p, ul, table, blockquote, h1, h2, h3, h4, h5, h6").slideDown(400),""===WDGProjectPageFunctions.isEditing&&WDGProjectPageFunctions.refreshEditable()},200)}),""===WDGProjectPageFunctions.isEditing&&WDGProjectPageFunctions.hideOthers(parseInt(e.attr("data-value")))):""===WDGProjectPageFunctions.isEditing&&(WDGProjectPageFunctions.hideOthers(-1),WDGProjectPageFunctions.refreshEditable())}WDGProjectPageFunctions.isClickBlocked=!1},hideOthers:function(e){var t=0;a(".projects-desc-content").each(function(){t!==e&&(a(this).find(".projects-more").slideDown(200),a(this).children().children().not("*:eq(0)").slideUp(400)),t++})},refreshEditable:function(){a(".projects-desc-content .zone-content").removeClass("editable"),a(".projects-desc-content").each(function(){var e=a(this).find(".projects-more"),t=a(this).attr("id").substr("project-content-".length);e.is(":visible")?WDGProjectPageFunctions.hideEditButton(t):a("#content").hasClass("editing")&&"statistics"!==t?(a(this).children(".zone-content").addClass("editable"),WDGProjectPageFunctions.showEditButton(t)):WDGProjectPageFunctions.hideEditButton(t)})},showEditButton:function(e){"undefined"!=typeof ProjectEditor&&ProjectEditor.showEditButton(e)},hideEditButton:function(e){"undefined"!=typeof ProjectEditor&&ProjectEditor.hideEditButton(e)}}}(jQuery),function(d,o){"use strict";var a=function(e){this.elem=e};a.prototype={constructor:a,getValue:function(e){var t=this.elem.getAttribute("data-"+e);return null!=t&&t},share:function(){var e=this.getValue("sharer").toLowerCase(),t={facebook:{shareUrl:"https://www.facebook.com/sharer/sharer.php",params:{u:this.getValue("url")}},googleplus:{shareUrl:"https://plus.google.com/share",params:{url:this.getValue("url")}},linkedin:{shareUrl:"https://www.linkedin.com/shareArticle",params:{url:this.getValue("url"),mini:!0}},twitter:{shareUrl:"https://twitter.com/intent/tweet/",params:{text:this.getValue("title"),url:this.getValue("url"),hashtags:this.getValue("hashtags"),via:this.getValue("via")}},email:{shareUrl:"mailto:"+this.getValue("to"),params:{subject:this.getValue("subject"),body:this.getValue("title")+"\n"+this.getValue("url")},isLink:!0},whatsapp:{shareUrl:"whatsapp://send",params:{text:this.getValue("title")+" "+this.getValue("url")},isLink:!0},telegram:{shareUrl:"tg://msg_url",params:{text:this.getValue("title")+" "+this.getValue("url")},isLink:!0},viber:{shareUrl:"viber://forward",params:{text:this.getValue("title")+" "+this.getValue("url")},isLink:!0},line:{shareUrl:"http://line.me/R/msg/text/?"+encodeURIComponent(this.getValue("title")+" "+this.getValue("url")),isLink:!0},pinterest:{shareUrl:"https://www.pinterest.com/pin/create/button/",params:{url:this.getValue("url"),media:this.getValue("image"),description:this.getValue("description")}},tumblr:{shareUrl:"http://tumblr.com/widgets/share/tool",params:{canonicalUrl:this.getValue("url"),content:this.getValue("url"),posttype:"link",title:this.getValue("title"),caption:this.getValue("caption"),tags:this.getValue("tags")}},hackernews:{shareUrl:"https://news.ycombinator.com/submitlink",params:{u:this.getValue("url"),t:this.getValue("title")}},reddit:{shareUrl:"https://www.reddit.com/submit",params:{url:this.getValue("url")}},vk:{shareUrl:"http://vk.com/share.php",params:{url:this.getValue("url"),title:this.getValue("title"),description:this.getValue("caption"),image:this.getValue("image")}},xing:{shareUrl:"https://www.xing.com/app/user",params:{op:"share",url:this.getValue("url"),title:this.getValue("title")}},buffer:{shareUrl:"https://buffer.com/add",params:{url:this.getValue("url"),title:this.getValue("title"),via:this.getValue("via"),picture:this.getValue("picture")}},instapaper:{shareUrl:"http://www.instapaper.com/edit",params:{url:this.getValue("url"),title:this.getValue("title"),description:this.getValue("description")}},pocket:{shareUrl:"https://getpocket.com/save",params:{url:this.getValue("url")}},digg:{shareUrl:"http://www.digg.com/submit",params:{url:this.getValue("url")}},stumbleupon:{shareUrl:"http://www.stumbleupon.com/submit",params:{url:this.getValue("url"),title:this.getValue("title")}},flipboard:{shareUrl:"https://share.flipboard.com/bookmarklet/popout",params:{v:2,title:this.getValue("title"),url:this.getValue("url"),t:Date.now()}},weibo:{shareUrl:"http://service.weibo.com/share/share.php",params:{url:this.getValue("url"),title:this.getValue("title"),pic:this.getValue("image"),appkey:this.getValue("appkey"),ralateUid:this.getValue("ralateuid"),language:"zh_cn"}},renren:{shareUrl:"http://share.renren.com/share/buttonshare",params:{link:this.getValue("url")}},myspace:{shareUrl:"https://myspace.com/post",params:{u:this.getValue("url"),t:this.getValue("title"),c:this.getValue("description")}},blogger:{shareUrl:"https://www.blogger.com/blog-this.g",params:{u:this.getValue("url"),n:this.getValue("title"),t:this.getValue("description")}},baidu:{shareUrl:"http://cang.baidu.com/do/add",params:{it:this.getValue("title"),iu:this.getValue("url")}}}[e];return t&&(t.width=this.getValue("width"),t.height=this.getValue("height")),void 0!==t&&this.urlSharer(t)},urlSharer:function(e){var t,i=e.params||{},n=Object.keys(i),o=0<n.length?"?":"";for(t=0;t<n.length;t++)"?"!==o&&(o+="&"),i[n[t]]&&(o+=n[t]+"="+encodeURIComponent(i[n[t]]));if(e.shareUrl+=o,e.isLink)d.location.href=e.shareUrl;else{var a=e.width||600,r=e.height||480,s=d.innerWidth/2-a/2+d.screenX,c="scrollbars=no, width="+a+", height="+r+", top="+(d.innerHeight/2-r/2+d.screenY)+", left="+s,l=d.open(e.shareUrl,"",c);d.focus&&l.focus()}}},d.addEventListener("load",function(){function e(e){var t=e.currentTarget||e.srcElement;new a(t).share()}var t,i=o.querySelectorAll(".sharer"),n=i.length;for(t=0;t<n;t++)i[t].addEventListener("click",e)})}(window,document);